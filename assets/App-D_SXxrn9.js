import{j as i,g as Jt,r as h,u as D,a as W,c as ut,b as tt,R as At,L as Kt}from"./index-8W_cWhwI.js";import{useTonConnectModal as Xt,useTonAddress as Zt}from"./index-C1BwXFoJ.js";import{useCloudStorage as xe,useMainButton as es,useUtils as ts,useBackButton as st,useSettingsButton as ss,useClosingBehavior as ns}from"./index-D3G12Oyz.js";const rs=""+new URL("wallet-0L6284XF.svg",import.meta.url).href,is="_walletImg_6a6wk_1",as="_WalletConWrap_6a6wk_21",ct={walletImg:is,WalletConWrap:as},os=()=>{const e=Xt(),t=Zt(!0);return i.jsxs("div",{className:ct.WalletConWrap,children:[i.jsx("img",{className:ct.walletImg,onClick:s=>{t.length==0?e.open():alert("Wallet is already connected")},src:rs,alt:"Connect Wallet"}),t]})},_e=""+new URL("hat-icon-B7aTinpH.svg",import.meta.url).href,Rt=""+new URL("cup-rS1Pwblk.svg",import.meta.url).href,Ve=""+new URL("coin-Cx2wDCZ1.svg",import.meta.url).href,ls="_statWrapper_1bzes_1",us="_icon_1bzes_39",dt={statWrapper:ls,icon:us};var nt={},Ae=function(){return Ae=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var n in t=arguments[s])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},Ae.apply(this,arguments)},cs=function(){function e(t,s,r){var n=this;this.endVal=s,this.options=r,this.version="2.8.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(a){n.startTime||(n.startTime=a);var o=a-n.startTime;n.remaining=n.duration-o,n.useEasing?n.countDown?n.frameVal=n.startVal-n.easingFn(o,0,n.startVal-n.endVal,n.duration):n.frameVal=n.easingFn(o,n.startVal,n.endVal-n.startVal,n.duration):n.frameVal=n.startVal+(n.endVal-n.startVal)*(o/n.duration);var l=n.countDown?n.frameVal<n.endVal:n.frameVal>n.endVal;n.frameVal=l?n.endVal:n.frameVal,n.frameVal=Number(n.frameVal.toFixed(n.options.decimalPlaces)),n.printValue(n.frameVal),o<n.duration?n.rAF=requestAnimationFrame(n.count):n.finalEndVal!==null?n.update(n.finalEndVal):n.options.onCompleteCallback&&n.options.onCompleteCallback()},this.formatNumber=function(a){var o,l,c,u,f=a<0?"-":"";o=Math.abs(a).toFixed(n.options.decimalPlaces);var y=(o+="").split(".");if(l=y[0],c=y.length>1?n.options.decimal+y[1]:"",n.options.useGrouping){u="";for(var m=3,p=0,g=0,x=l.length;g<x;++g)n.options.useIndianSeparators&&g===4&&(m=2,p=1),g!==0&&p%m==0&&(u=n.options.separator+u),p++,u=l[x-g-1]+u;l=u}return n.options.numerals&&n.options.numerals.length&&(l=l.replace(/[0-9]/g,function(b){return n.options.numerals[+b]}),c=c.replace(/[0-9]/g,function(b){return n.options.numerals[+b]})),f+n.options.prefix+l+c+n.options.suffix},this.easeOutExpo=function(a,o,l,c){return l*(1-Math.pow(2,-10*a/c))*1024/1023+o},this.options=Ae(Ae({},this.defaults),r),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(s),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof t=="string"?document.getElementById(t):t,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return n.handleScroll(n)}),window.onscroll=function(){window.onScrollFns.forEach(function(a){return a()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(t){if(t&&window&&!t.once){var s=window.innerHeight+window.scrollY,r=t.el.getBoundingClientRect(),n=r.top+window.pageYOffset,a=r.top+r.height+window.pageYOffset;a<s&&a>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>a||n>s)&&!t.paused&&t.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>t;var s=t-this.startVal;if(Math.abs(s)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=t;var r=this.countDown?1:-1;this.endVal=t+r*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=t,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(t){var s;if(this.el){var r=this.formattingFn(t);!((s=this.options.plugin)===null||s===void 0)&&s.render?this.options.plugin.render(this.el,r):this.el.tagName==="INPUT"?this.el.value=r:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=r:this.el.innerHTML=r}},e.prototype.ensureNumber=function(t){return typeof t=="number"&&!isNaN(t)},e.prototype.validateValue=function(t){var s=Number(t);return this.ensureNumber(s)?s:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e}();const ds=Object.freeze(Object.defineProperty({__proto__:null,CountUp:cs},Symbol.toStringTag,{value:"Module"})),hs=Jt(ds);Object.defineProperty(nt,"__esModule",{value:!0});var w=h,fs=hs;function ps(e,t){var s=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s!=null){var r,n,a,o,l=[],c=!0,u=!1;try{if(a=(s=s.call(e)).next,t!==0)for(;!(c=(r=a.call(s)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(f){u=!0,n=f}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(u)throw n}}return l}}function ht(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),s.push.apply(s,r)}return s}function Re(e){for(var t=1;t<arguments.length;t++){var s=arguments[t]!=null?arguments[t]:{};t%2?ht(Object(s),!0).forEach(function(r){ys(e,r,s[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ht(Object(s)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(s,r))})}return e}function ms(e,t){if(typeof e!="object"||!e)return e;var s=e[Symbol.toPrimitive];if(s!==void 0){var r=s.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gs(e){var t=ms(e,"string");return typeof t=="symbol"?t:String(t)}function ys(e,t,s){return t=gs(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function Ze(){return Ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Ze.apply(this,arguments)}function vs(e,t){if(e==null)return{};var s={},r=Object.keys(e),n,a;for(a=0;a<r.length;a++)n=r[a],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}function Lt(e,t){if(e==null)return{};var s=vs(e,t),r,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function xs(e,t){return _s(e)||ps(e,t)||bs(e,t)||ws()}function _s(e){if(Array.isArray(e))return e}function bs(e,t){if(e){if(typeof e=="string")return ft(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return ft(e,t)}}function ft(e,t){(t==null||t>e.length)&&(t=e.length);for(var s=0,r=new Array(t);s<t;s++)r[s]=e[s];return r}function ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ss=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?w.useLayoutEffect:w.useEffect;function A(e){var t=w.useRef(e);return Ss(function(){t.current=e}),w.useCallback(function(){for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return t.current.apply(void 0,r)},[])}var js=function(t,s){var r=s.decimal,n=s.decimals,a=s.duration,o=s.easingFn,l=s.end,c=s.formattingFn,u=s.numerals,f=s.prefix,y=s.separator,m=s.start,p=s.suffix,g=s.useEasing,x=s.useGrouping,b=s.useIndianSeparators,M=s.enableScrollSpy,j=s.scrollSpyDelay,C=s.scrollSpyOnce,S=s.plugin;return new fs.CountUp(t,l,{startVal:m,duration:a,decimal:r,decimalPlaces:n,easingFn:o,formattingFn:c,numerals:u,separator:y,prefix:f,suffix:p,plugin:S,useEasing:g,useIndianSeparators:b,useGrouping:x,enableScrollSpy:M,scrollSpyDelay:j,scrollSpyOnce:C})},Cs=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],Ts={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},Wt=function(t){var s=Object.fromEntries(Object.entries(t).filter(function(T){var O=xs(T,2),K=O[1];return K!==void 0})),r=w.useMemo(function(){return Re(Re({},Ts),s)},[t]),n=r.ref,a=r.startOnMount,o=r.enableReinitialize,l=r.delay,c=r.onEnd,u=r.onStart,f=r.onPauseResume,y=r.onReset,m=r.onUpdate,p=Lt(r,Cs),g=w.useRef(),x=w.useRef(),b=w.useRef(!1),M=A(function(){return js(typeof n=="string"?n:n.current,p)}),j=A(function(T){var O=g.current;if(O&&!T)return O;var K=M();return g.current=K,K}),C=A(function(){var T=function(){return j(!0).start(function(){c==null||c({pauseResume:S,reset:k,start:z,update:V})})};l&&l>0?x.current=setTimeout(T,l*1e3):T(),u==null||u({pauseResume:S,reset:k,update:V})}),S=A(function(){j().pauseResume(),f==null||f({reset:k,start:z,update:V})}),k=A(function(){j().el&&(x.current&&clearTimeout(x.current),j().reset(),y==null||y({pauseResume:S,start:z,update:V}))}),V=A(function(T){j().update(T),m==null||m({pauseResume:S,reset:k,start:z})}),z=A(function(){k(),C()}),oe=A(function(T){a&&(T&&k(),C())});return w.useEffect(function(){b.current?o&&oe(!0):(b.current=!0,oe())},[o,b,oe,l,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.formattingFn]),w.useEffect(function(){return function(){k()}},[k]),{start:z,pauseResume:S,reset:k,update:V,getCountUp:j}},Ps=["className","redraw","containerProps","children","style"],Es=function(t){var s=t.className,r=t.redraw,n=t.containerProps,a=t.children,o=t.style,l=Lt(t,Ps),c=w.useRef(null),u=w.useRef(!1),f=Wt(Re(Re({},l),{},{ref:c,startOnMount:typeof a!="function"||t.delay===0,enableReinitialize:!1})),y=f.start,m=f.reset,p=f.update,g=f.pauseResume,x=f.getCountUp,b=A(function(){y()}),M=A(function(S){t.preserveValue||m(),p(S)}),j=A(function(){if(typeof t.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}x()});w.useEffect(function(){j()},[j]),w.useEffect(function(){u.current&&M(t.end)},[t.end,M]);var C=r&&t;return w.useEffect(function(){r&&u.current&&b()},[b,r,C]),w.useEffect(function(){!r&&u.current&&b()},[b,r,t.start,t.suffix,t.prefix,t.duration,t.separator,t.decimals,t.decimal,t.className,t.formattingFn]),w.useEffect(function(){u.current=!0},[]),typeof a=="function"?a({countUpRef:c,start:y,reset:m,update:p,pauseResume:g,getCountUp:x}):w.createElement("span",Ze({className:s,ref:c,style:o},n),typeof t.start<"u"?x().formattingFn(t.start):"")},ve=nt.default=Es;nt.useCountUp=Wt;const Oe=({icon:e,value:t,...s})=>i.jsxs("div",{className:[dt.statWrapper,"pixel-border"].join(" "),children:[i.jsx("img",{className:dt.icon,src:e}),i.jsx(ve,{start:0,end:t,separator:" "})]}),ks="_headerWrap_j6ys5_1",Ns={headerWrap:ks},Is=({hidden:e=!1})=>{const[t,s]=h.useState(!1),r=D({from:{marginTop:e?"0":"-15%"},to:{marginTop:e?"-15%":"0"}});return h.useEffect(()=>{if(e){console.log("TIMEOUT SET");const n=setTimeout(()=>{s(e)},1e3);return()=>{clearTimeout(n)}}else console.log(e),s(!1)},[e]),i.jsxs(W.header,{style:r,className:Ns.headerWrap,children:[t?i.jsxs(i.Fragment,{children:[i.jsx("div",{})," ",i.jsx("div",{}),i.jsx("div",{})]}):i.jsxs(i.Fragment,{children:[i.jsx(Oe,{icon:_e,value:1e3}),i.jsx(Oe,{icon:Rt,value:1e3}),i.jsx(Oe,{icon:Ve,value:1e3})]}),i.jsx(os,{})]})},As=""+new URL("logo-dark-pxcTu58g.svg",import.meta.url).href,Rs="_logoStyle_1mpkp_1",Ls={logoStyle:Rs},Ws=({minimized:e=!1,hidden:t=!1,...s})=>{const r=D({config:ut.stiff,from:{width:t?"50vw":"0%"},to:{width:t?"0%":"50vw"},reset:!1}),n=D({config:ut.gentle,from:{scale:e?"100%":"70%"},to:{scale:e?"70%":"100%"},reset:!1});return i.jsx(W.img,{...s,style:{...r,...n},className:Ls.logoStyle,src:As,alt:"The zavod"})},Vs="_StartPageWrap_1swmr_1",Os="_infoText_1swmr_49",Us="_infoTextReverse_1swmr_49",Hs="_infoText_textPart_1swmr_59",Ms="_header_1swmr_75",Fs="_mainHeader_1swmr_85",Bs="_close_1swmr_97",q={StartPageWrap:Vs,infoText:Os,infoTextReverse:Us,infoText_textPart:Hs,header:Ms,mainHeader:Fs,close:Bs},et=""+new URL("close-D8nR8gUl.svg",import.meta.url).href,Ds=({onClose:e,onToast:t,onLoad:s})=>{const r=xe();h.useEffect(()=>{r.get("tutorialToasts").then(a=>{a=="true"&&t(i.jsxs("span",{children:["You'll recieve a hints like this during the game. If you want to disable them, go to Settings",i.jsx("br",{}),i.jsx("br",{}),"Click anywhere to close the hint"]}))})},[r,t]),h.useEffect(()=>{s()},[]);const n=({icon:a,reverse:o=!1,title:l,text:c,...u})=>i.jsxs("div",{className:o?q.infoText:q.infoTextReverse,children:[i.jsxs("div",{className:q.infoText_textPart,children:[i.jsx("h2",{className:q.header,children:l}),i.jsx("p",{children:c})]}),i.jsx("img",{src:a,alt:"Icon"})]});return i.jsxs("div",{className:[q.StartPageWrap,"pixel-border"].join(" "),children:[i.jsx("h1",{onClick:()=>{t(i.jsx("span",{children:"You'll recieve a hints like this during the game. If you want to disable them, go to Settings Tab"}))},className:q.mainHeader,children:"How to play?"}),i.jsx(n,{icon:_e,title:"BUY HAT!",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."}),i.jsx(n,{reverse:!0,icon:Rt,title:"MINING!",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."}),i.jsx(n,{icon:Ve,title:"SELL!",text:"Lorem ipsum dolor sit amet consectetur adipisicing elit."}),i.jsx("img",{onClick:()=>{r.set("tutorialComplete","true").then(()=>{e()})},className:q.close,src:et,alt:"Close"})]})},$s="_swapElement_1ejj2_1",zs="_oldBg_1ejj2_25",qs="_newBg_1ejj2_43",Qs={swapElement:$s,oldBg:zs,newBg:qs},Ys=({background:e,bgArray:t=[]})=>tt([e],{from:{filter:"blur(100px)"},enter:{filter:"blur(0)"},leave:{filter:"blur(100px)"}})((r,n)=>i.jsx(W.div,{className:Qs.swapElement,style:{...r,backgroundImage:`url("${n}")`}})),Gs="_title_1229s_1",Js="_hideOverflow_1229s_67",pt={title:Gs,hideOverflow:Js},Ks=({children:e,hidden:t=!0,...s})=>{const[r,n]=h.useState(!1),a=D({config:{duration:100},from:{width:t?"80vw":"0px",fontSize:t?"18px":"0px",marginTop:t?0:-30,marginBottom:t?0:-30},to:{width:t?"0px":"80vw",fontSize:t?"0px":"18px",marginTop:t?-30:0,marginBottom:t?-30:0}});return h.useEffect(()=>{if(t)n(!1);else{const o=setTimeout(()=>{n(!0)},1e3);return()=>{clearTimeout(o)}}},[t]),i.jsx(W.h1,{...s,style:a,className:[pt.title,...s.className||""].join(" "),children:i.jsxs("div",{className:pt.hideOverflow,children:[i.jsx("img",{src:"./titlebg.svg"}),e]})})},Xs="_MainPageWrap_1udvw_1",Zs="_bigHat_1udvw_13",en="_topIcon_1udvw_25",tn="_bottomActions_1udvw_33",Ue={MainPageWrap:Xs,bigHat:Zs,topIcon:en,bottomActions:tn},sn="_Button_1s2mt_1",nn="_shine_1s2mt_1",rn={Button:sn,shine:nn},$=({children:e,bg:t,...s})=>{const[r,n]=h.useState(!1),[a,o]=h.useState("0s");return h.useEffect(()=>{o(Math.random().toFixed(2)*10+"s")},[]),i.jsx("button",{style:{animationDelay:a},onMouseDown:()=>{n(!0)},onMouseUp:()=>{n(!1)},...s,className:rn.Button+(s.className?" "+s.className:""),children:i.jsx("img",{src:t,alt:"Button"})})};var an=Object.defineProperty,on=(e,t,s)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,I=(e,t,s)=>(on(e,typeof t!="symbol"?t+"":t,s),s),Vt=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)},_=(e,t,s)=>(Vt(e,t,"read from private field"),s?s.call(e):t.get(e)),v=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},d=(e,t,s)=>(Vt(e,t,"access private method"),s),He,mt,Z,le,be,Me,Fe,gt,we,Be,Se,De,je,$e,ue,Ce,R,U,ze,yt,ee,ce,te,de,qe,vt,Qe,Ye,xt,Ge,_t,Te,Je,he,Pe,se,fe,pe,Ee,B,Q,ne,me,re,ge,ke,Ke,L,H,bt;const Ot=e=>Array.isArray(e),Ut=e=>Ot(e)?e:[e];let ln=function(e){let t=function(p){return Ut(p).forEach(g=>{var x;return m.set(Symbol((x=g.char)==null?void 0:x.innerText),n({...g}))}),this},s=()=>c().filter(p=>p.typeable),r=function(p,g){let x=[...m.keys()];m.set(x[p],n(g))},n=p=>(p.shouldPauseCursor=function(){return!!(this.typeable||this.cursorable||this.deletable)},p),a=function(){m.forEach(p=>delete p.done)},o=function(){m=new Map,t(e)},l=()=>m,c=()=>Array.from(m.values()),u=p=>m.delete(p),f=(p=!1)=>p?c():c().filter(g=>!g.done),y=(p,g=!1)=>g?m.delete(p):m.get(p).done=!0,m=new Map;return t(e),{add:t,set:r,wipe:o,done:y,reset:a,destroy:u,getItems:f,getQueue:l,getTypeable:s}};const Ht="data-typeit-id",J="ti-cursor",un="END",cn={started:!1,completed:!1,frozen:!1,destroyed:!1},ae={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map(e=>({opacity:e})),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}},dn=`[${Ht}]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}`,Ie=e=>document.createElement(e),rt=e=>document.createTextNode(e),Mt=(e,t="")=>{let s=Ie("style");s.id=t,s.appendChild(rt(e)),document.head.appendChild(s)},wt=e=>(Ot(e)||(e=[e/2,e/2]),e),St=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));let jt=e=>e/2;function hn(e){let{speed:t,deleteSpeed:s,lifeLike:r}=e;return s=s!==null?s:t/3,r?[St(t,jt(t)),St(s,jt(s))]:[t,s]}const Ft=e=>Array.from(e);let it=e=>([...e.childNodes].forEach(t=>{if(t.nodeValue){[...t.nodeValue].forEach(s=>{t.parentNode.insertBefore(rt(s),t)}),t.remove();return}it(t)}),e);const Bt=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,it(t.body)};function Dt(e,t=!1,s=!1){let r=e.querySelector(`.${J}`),n=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:l=>{var c,u;if(r&&s){if((c=l.classList)!=null&&c.contains(J))return NodeFilter.FILTER_ACCEPT;if(r.contains(l))return NodeFilter.FILTER_REJECT}return(u=l.classList)!=null&&u.contains(J)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),a,o=[];for(;a=n.nextNode();)a.originalParent||(a.originalParent=a.parentNode),o.push(a);return t?o.reverse():o}function fn(e){return Dt(Bt(e))}function pn(e,t=!0){return t?fn(e):Ft(e).map(rt)}const $t=e=>Number.isInteger(e),Ct=({queueItems:e,selector:t,cursorPosition:s,to:r})=>{if($t(t))return t*-1;let n=new RegExp(un,"i").test(r),a=t?[...e].reverse().findIndex(({char:l})=>{let c=l.parentElement,u=c.matches(t);return n&&u?!0:u&&c.firstChild.isSameNode(l)}):-1;a<0&&(a=n?0:e.length-1);let o=n?0:1;return a-s+o},mn=e=>(e.forEach(clearTimeout),[]),Ne=(e,t)=>new Array(t).fill(e);let Le=e=>new Promise(t=>{requestAnimationFrame(async()=>{t(await e())})}),zt=e=>e==null?void 0:e.getAnimations().find(t=>t.id===e.dataset.tiAnimationId),qt=({cursor:e,frames:t,options:s})=>{let r=e.animate(t,s);return r.pause(),r.id=e.dataset.tiAnimationId,Le(()=>{Le(()=>{r.play()})}),r},gn=({cursor:e,options:t,cursorOptions:s})=>{if(!e||!s)return;let r=zt(e),n;r&&(t.delay=r.effect.getComputedTiming().delay,n=r.currentTime,r.cancel());let a=qt({cursor:e,frames:s.animation.frames,options:t});return n&&(a.currentTime=n),a},Tt=e=>{var t;return(t=e.func)==null?void 0:t.call(null)},yn=async({index:e,queueItems:t,wait:s,cursor:r,cursorOptions:n})=>{let a=t[e][1],o=[],l=e,c=a,u=()=>c&&!c.delay,f=a.shouldPauseCursor()&&n.autoPause;for(;u();)o.push(c),u()&&l++,c=t[l]?t[l][1]:null;if(o.length)return await Le(async()=>{for(let p of o)await Tt(p)}),l-1;let y=zt(r),m;return y&&(m={...y.effect.getComputedTiming(),delay:f?n.autoPauseDelay:0}),await s(async()=>{y&&f&&y.cancel(),await Le(()=>{Tt(a)})},a.delay),await gn({cursor:r,options:m,cursorOptions:n}),e};const vn=(e,t)=>{new IntersectionObserver((r,n)=>{r.forEach(a=>{a.isIntersecting&&(t(),n.unobserve(e))})},{threshold:1}).observe(e)},xn=()=>Math.random().toString().substring(2,9),We=e=>"value"in e;let _n=e=>We(e)?Ft(e.value):Dt(e,!0).filter(t=>!(t.childNodes.length>0)),ie=e=>typeof e=="function"?e():e,at=(e,t=document,s=!1)=>t[`querySelector${s?"All":""}`](e),bn=e=>/body/i.test(e==null?void 0:e.tagName),wn=(e,t)=>{if(We(e)){e.value=`${e.value}${t.textContent}`;return}t.innerHTML="";let s=bn(t.originalParent)?e:t.originalParent||e;s.insertBefore(t,at("."+J,s)||null)};const Sn=e=>/<(.+)>(.*?)<\/(.+)>/.test(e.outerHTML),ye=(e,t)=>Object.assign({},e,t);let jn=e=>{var t,s;if(typeof e=="object"){let r={},{frames:n,options:a}=ae.cursor.animation;return r.animation=e.animation||{},r.animation.frames=((t=e.animation)==null?void 0:t.frames)||n,r.animation.options=ye(a,((s=e.animation)==null?void 0:s.options)||{}),r.autoPause=e.autoPause??ae.cursor.autoPause,r.autoPauseDelay=e.autoPauseDelay||ae.cursor.autoPauseDelay,r}return e===!0?ae.cursor:e};const Cn=(e,t)=>{if(!e)return;let s=e.parentNode;(s.childNodes.length>1||s.isSameNode(t)?e:s).remove()},Tn=(e,t,s)=>{let r=t[s-1],n=at(`.${J}`,e);e=(r==null?void 0:r.parentNode)||e,e.insertBefore(n,r||null)};function Pn(e){return typeof e=="string"?at(e):e}let En={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"},kn=(e,t)=>{let r=`${`[${Ht}='${e}']`} .${J}`,n=getComputedStyle(t),a=Object.entries(En).reduce((o,[l,c])=>`${o} ${l}: var(--ti-cursor-${l}, ${c||n[l]});`,"");Mt(`${r} { display: inline-block; width: 0; ${a} }`,e)};function Nn(e){return e.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/)}let In=(e,t,s)=>Math.min(Math.max(t+e,0),s.length),An=(e,t,s)=>new Promise(r=>{let n=async()=>{await e(),r()};s.push(setTimeout(n,t||0))}),Rn=(bt=class{constructor(e,t={}){v(this,He),v(this,Z),v(this,be),v(this,Fe),v(this,we),v(this,Se),v(this,je),v(this,ue),v(this,R),v(this,ze),v(this,ee),v(this,te),v(this,qe),v(this,Ye),v(this,Ge),v(this,Te),v(this,he),v(this,se),v(this,pe),v(this,B),v(this,ne),v(this,re),v(this,ke),v(this,L),I(this,"element"),I(this,"timeouts"),I(this,"cursorPosition"),I(this,"predictedCursorPosition"),I(this,"statuses",{started:!1,completed:!1,frozen:!1,destroyed:!1}),I(this,"opts"),I(this,"id"),I(this,"queue"),I(this,"cursor"),I(this,"unfreeze",()=>{}),I(this,"is",function(s){return this.statuses[s]}),v(this,Qe,s=>{s.cursor=jn(s.cursor??ae.cursor),this.opts.strings=d(this,Ye,xt).call(this,Ut(this.opts.strings)),this.opts=ye(this.opts,{html:!_(this,re,ge)&&this.opts.html,nextStringDelay:wt(this.opts.nextStringDelay),loopDelay:wt(this.opts.loopDelay)})}),this.opts=ye(ae,t),this.element=Pn(e),this.timeouts=[],this.cursorPosition=0,this.unfreeze=()=>{},this.predictedCursorPosition=null,this.statuses=ye({},cn),this.id=xn(),this.queue=ln([{delay:this.opts.startDelay}]),_(this,Qe).call(this,t),this.cursor=d(this,Ge,_t).call(this),this.element.dataset.typeitId=this.id,Mt(dn),this.opts.strings.length&&d(this,qe,vt).call(this)}go(){return this.statuses.started?this:(d(this,je,$e).call(this),this.opts.waitUntilVisible?(vn(this.element,d(this,Z,le).bind(this)),this):(d(this,Z,le).call(this),this))}destroy(e=!0){this.timeouts=mn(this.timeouts),ie(e)&&this.cursor&&d(this,pe,Ee).call(this,this.cursor),this.statuses.destroyed=!0}reset(e){!this.is("destroyed")&&this.destroy(),e?(this.queue.wipe(),e(this)):this.queue.reset(),this.cursorPosition=0;for(let t in this.statuses)this.statuses[t]=!1;return this.element[d(this,ue,Ce).call(this)?"value":"innerHTML"]="",this}type(e,t={}){e=ie(e);let{instant:s}=t,r=d(this,ee,ce).call(this,t),a=pn(e,this.opts.html).map(l=>({func:()=>d(this,he,Pe).call(this,l),char:l,delay:s||Sn(l)?0:d(this,B,Q).call(this),typeable:l.nodeType===Node.TEXT_NODE})),o=[r[0],{func:async()=>await this.opts.beforeString(e,this)},...a,{func:async()=>await this.opts.afterString(e,this)},r[1]];return d(this,R,U).call(this,o,t)}break(e={}){return d(this,R,U).call(this,{func:()=>d(this,he,Pe).call(this,Ie("BR")),typeable:!0},e)}move(e,t={}){e=ie(e);let s=d(this,ee,ce).call(this,t),{instant:r,to:n}=t,a=Ct({queueItems:this.queue.getTypeable(),selector:e===null?"":e,to:n,cursorPosition:_(this,ne,me)}),o=a<0?-1:1;return this.predictedCursorPosition=_(this,ne,me)+a,d(this,R,U).call(this,[s[0],...Ne({func:()=>d(this,be,Me).call(this,o),delay:r?0:d(this,B,Q).call(this),cursorable:!0},Math.abs(a)),s[1]],t)}exec(e,t={}){let s=d(this,ee,ce).call(this,t);return d(this,R,U).call(this,[s[0],{func:()=>e(this)},s[1]],t)}options(e,t={}){return e=ie(e),d(this,te,de).call(this,e),d(this,R,U).call(this,{},t)}pause(e,t={}){return d(this,R,U).call(this,{delay:ie(e)},t)}delete(e=null,t={}){e=ie(e);let s=d(this,ee,ce).call(this,t),r=e,{instant:n,to:a}=t,o=this.queue.getTypeable(),l=r===null?o.length:$t(r)?r:Ct({queueItems:o,selector:r,cursorPosition:_(this,ne,me),to:a});return d(this,R,U).call(this,[s[0],...Ne({func:d(this,se,fe).bind(this),delay:n?0:d(this,B,Q).call(this,1),deletable:!0},l),s[1]],t)}freeze(){this.statuses.frozen=!0}flush(e=()=>{}){return d(this,je,$e).call(this),d(this,Z,le).call(this,!1).then(e),this}getQueue(){return this.queue}getOptions(){return this.opts}updateOptions(e){return d(this,te,de).call(this,e)}getElement(){return this.element}empty(e={}){return d(this,R,U).call(this,{func:d(this,He,mt).bind(this)},e)}},He=new WeakSet,mt=async function(){if(d(this,ue,Ce).call(this)){this.element.value="";return}_(this,L,H).forEach(d(this,pe,Ee).bind(this))},Z=new WeakSet,le=async function(e=!0){this.statuses.started=!0;let t=s=>{this.queue.done(s,!e)};try{let s=[...this.queue.getQueue()];for(let n=0;n<s.length;n++){let[a,o]=s[n];if(!o.done){if(!o.deletable||o.deletable&&_(this,L,H).length){let l=await d(this,we,Be).call(this,n,s);Array(l-n).fill(n+1).map((c,u)=>c+u).forEach(c=>{let[u]=s[c];t(u)}),n=l}t(a)}}if(!e)return this;if(this.statuses.completed=!0,await this.opts.afterComplete(this),!this.opts.loop)throw"";let r=this.opts.loopDelay;d(this,Se,De).call(this,async()=>{await d(this,Fe,gt).call(this,r[0]),d(this,Z,le).call(this)},r[1])}catch{}return this},be=new WeakSet,Me=async function(e){this.cursorPosition=In(e,this.cursorPosition,_(this,L,H)),Tn(this.element,_(this,L,H),this.cursorPosition)},Fe=new WeakSet,gt=async function(e){let t=_(this,ne,me);t&&await d(this,be,Me).call(this,{value:t});let s=_(this,L,H).map(r=>[Symbol(),{func:d(this,se,fe).bind(this),delay:d(this,B,Q).call(this,1),deletable:!0,shouldPauseCursor:()=>!0}]);for(let r=0;r<s.length;r++)await d(this,we,Be).call(this,r,s);this.queue.reset(),this.queue.set(0,{delay:e})},we=new WeakSet,Be=function(e,t){return yn({index:e,queueItems:t,wait:d(this,Se,De).bind(this),cursor:this.cursor,cursorOptions:this.opts.cursor})},Se=new WeakSet,De=async function(e,t,s=!1){this.statuses.frozen&&await new Promise(r=>{this.unfreeze=()=>{this.statuses.frozen=!1,r()}}),s||await this.opts.beforeStep(this),await An(e,t,this.timeouts),s||await this.opts.afterStep(this)},je=new WeakSet,$e=async function(){if(!d(this,ue,Ce).call(this)&&this.cursor&&this.element.appendChild(this.cursor),_(this,ke,Ke)){kn(this.id,this.element),this.cursor.dataset.tiAnimationId=this.id;let{animation:e}=this.opts.cursor,{frames:t,options:s}=e;qt({frames:t,cursor:this.cursor,options:{duration:this.opts.cursorSpeed,...s}})}},ue=new WeakSet,Ce=function(){return We(this.element)},R=new WeakSet,U=function(e,t){return this.queue.add(e),d(this,ze,yt).call(this,t),this},ze=new WeakSet,yt=function(e={}){let t=e.delay;t&&this.queue.add({delay:t})},ee=new WeakSet,ce=function(e={}){return[{func:()=>d(this,te,de).call(this,e)},{func:()=>d(this,te,de).call(this,this.opts)}]},te=new WeakSet,de=async function(e){this.opts=ye(this.opts,e)},qe=new WeakSet,vt=function(){let e=this.opts.strings.filter(t=>!!t);e.forEach((t,s)=>{if(this.type(t),s+1===e.length)return;let r=this.opts.breakLines?[{func:()=>d(this,he,Pe).call(this,Ie("BR")),typeable:!0}]:Ne({func:d(this,se,fe).bind(this),delay:d(this,B,Q).call(this,1)},this.queue.getTypeable().length);d(this,Te,Je).call(this,r)})},Qe=new WeakMap,Ye=new WeakSet,xt=function(e){let t=this.element.innerHTML;return t?(this.element.innerHTML="",this.opts.startDelete?(this.element.innerHTML=t,it(this.element),d(this,Te,Je).call(this,Ne({func:d(this,se,fe).bind(this),delay:d(this,B,Q).call(this,1),deletable:!0},_(this,L,H).length)),e):Nn(t).concat(e)):e},Ge=new WeakSet,_t=function(){if(_(this,re,ge))return null;let e=Ie("span");return e.className=J,_(this,ke,Ke)?(e.innerHTML=Bt(this.opts.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)},Te=new WeakSet,Je=function(e){let t=this.opts.nextStringDelay;this.queue.add([{delay:t[0]},...e,{delay:t[1]}])},he=new WeakSet,Pe=function(e){wn(this.element,e)},se=new WeakSet,fe=function(){_(this,L,H).length&&(_(this,re,ge)?this.element.value=this.element.value.slice(0,-1):d(this,pe,Ee).call(this,_(this,L,H)[this.cursorPosition]))},pe=new WeakSet,Ee=function(e){Cn(e,this.element)},B=new WeakSet,Q=function(e=0){return hn(this.opts)[e]},ne=new WeakSet,me=function(){return this.predictedCursorPosition??this.cursorPosition},re=new WeakSet,ge=function(){return We(this.element)},ke=new WeakSet,Ke=function(){return!!this.opts.cursor&&!_(this,re,ge)},L=new WeakSet,H=function(){return _n(this.element)},bt);const Ln=h.forwardRef((e,t)=>{const{as:s}=e;return At.createElement(s,{ref:t,...e})}),Wn={},Vn=({as:e="span",options:t=Wn,children:s=null,getBeforeInit:r=o=>o,getAfterInit:n=o=>o,...a})=>{const o=h.useRef(null),l=h.useRef(null),[c,u]=h.useState(!0),[f,y]=h.useState(null);function m(){const g=Object.assign({},t);s&&o.current&&(g.strings=o.current.innerHTML),y(g)}function p(){l.current=new Rn(o.current,f),l.current=r(l.current),l.current.go(),l.current=n(l.current)}return h.useEffect(()=>{m(),u(!1)},[t]),h.useEffect(()=>{var g;f&&((g=l.current)!=null&&g.updateOptions(f)||p())},[f]),h.useEffect(()=>()=>{var g;return(g=l.current)==null?void 0:g.destroy()},[]),At.createElement(Ln,{ref:o,as:e,children:c?s:null,style:{opacity:c?0:1},...a})},On="_infoWrap_198sd_1",Un={infoWrap:On},ot=({onClose:e})=>i.jsxs("div",{onClick:()=>{e()},className:Un.infoWrap,children:[i.jsx("img",{src:"./question.svg",alt:"How to Play"}),i.jsx("h3",{children:"How to play"})]}),Hn=({onClose:e,onLoad:t})=>{const s=es();return h.useEffect(()=>{s.enable().setParams({text:"Главное действие"}).show();const r=setTimeout(()=>{t()},1500);return()=>{s.hide(),clearTimeout(r)}},[]),i.jsxs("div",{className:Ue.MainPageWrap,children:[i.jsx("img",{className:Ue.bigHat,src:_e,alt:"Buy worker"}),i.jsxs("div",{className:Ue.bottomActions,children:[i.jsx($,{onClick:()=>{e("referral")},bg:"./ref-btn.svg"}),i.jsx($,{onClick:()=>{e("top buyers")},bg:"./top-btn.svg"}),i.jsx($,{onClick:()=>{e("store",{hasHeader:!1,hasLogo:!1})},bg:"./mint-btn.svg"})]}),i.jsx(ot,{onClose:()=>{e("start",{hasLogo:!0,helpHidden:!0})}})]})},Mn="_refPageWrap_1489s_1",Fn="_copyInput_1489s_17",Bn="_refControls_1489s_43",Dn="_stats_1489s_67",$n="_statTile_1489s_77",zn="_refExtraHint_1489s_123",P={refPageWrap:Mn,copyInput:Fn,refControls:Bn,stats:Dn,statTile:$n,refExtraHint:zn},Pt=""+new URL("friends-Cf-mNyKv.svg",import.meta.url).href,Et=""+new URL("success-XdqEFx9m.svg",import.meta.url).href,qn=({onClose:e,onHelp:t,onLoad:s,onToast:r})=>{const n=h.useRef(),a=ts(),o=xe(),l=()=>{try{a.openTelegramLink(`https://t.me/share/url?url=${encodeURIComponent(n.current.value)}&text=${encodeURIComponent("Join me on ZAVOD and let's earn together! Use my invite link to join the fun 💥")}`),r(i.jsxs("div",{className:P.refExtraHint,children:[i.jsx("img",{width:40,src:Et,alt:"success"}),i.jsx("p",{children:"Thank you for sharing!"})]}))}catch(f){r(i.jsxs("div",{className:P.refExtraHint,children:[i.jsx("img",{width:40,src:et,alt:"error"}),i.jsxs("p",{children:["Cannot share: ",f.message]}),i.jsx("p",{children:"You can also copy or manually select your ref link"})]}))}},c=()=>{navigator.clipboard.writeText(n.current.value).then(f=>{r(i.jsxs("div",{className:P.refExtraHint,children:[i.jsx("img",{width:40,src:Et,alt:"success"}),i.jsx("p",{children:"Copied to clipboard"})]}))}).catch(f=>{r(i.jsxs("div",{className:P.refExtraHint,children:[i.jsx("img",{width:40,src:et,alt:"Error"}),i.jsxs("p",{children:["Unable to copy reflink: ",f.message]}),i.jsx("p",{children:"You can select text manually or use share button"})]}))})},u=st();return h.useEffect(()=>{console.log(u,e),u.show();const f=u.on("click",e);return()=>{u.off("click",f),u.hide()}},[]),h.useEffect(()=>{const f=setTimeout(()=>{s()},1500);return()=>{clearTimeout(f)}},[]),h.useEffect(()=>{o.get("tutorialToasts").then(f=>{console.log(f),f=="true"&&r(i.jsxs("div",{className:P.refExtraHint,children:[i.jsx("img",{src:Pt,alt:"your refferals image"}),i.jsx("p",{children:"You can see more info about your referrals by clicking this icon"})]}))})},[o,r]),i.jsxs("div",{className:P.refPageWrap,children:[i.jsxs("div",{className:P.stats,children:[i.jsxs("div",{className:P.statTile,children:[i.jsx("h4",{children:"hat"}),i.jsx("img",{src:_e,alt:"hat image"}),i.jsx(ve,{start:0,end:123})]}),i.jsxs("div",{className:P.statTile,children:[i.jsx("h4",{children:"money"}),i.jsx("img",{src:Ve,alt:"coin image"}),i.jsx(ve,{start:0,end:5e3})]}),i.jsxs("div",{className:P.statTile,children:[i.jsx("h4",{children:"friends"}),i.jsx("img",{src:Pt,alt:"your refferals image"}),i.jsx(ve,{start:0,end:12})]}),i.jsx("div",{className:P.statTile,children:i.jsx("span",{children:"Lorem, ipsum dolor sit amet consectetur adipisicing elit"})})]}),i.jsx("input",{onClick:c,ref:n,className:P.copyInput,type:"text",disabled:!0,value:"https://t.me/zavod?start=test123"}),i.jsxs("div",{className:P.refControls,children:[i.jsx($,{onClick:c,bg:"./copy-btn.svg"}),i.jsx($,{onClick:l,bg:"./share-btn.svg"})]}),i.jsx(ot,{onClose:t})]})},Qn="_topUser_1v1vj_1",Yn="_topUserYou_1v1vj_1",Gn="_placeAndAvatar_1v1vj_43",Jn="_PlaceWrap_1v1vj_53",Kn="_CoinCount_1v1vj_67",Xn="_WalletInfo_1v1vj_91",Zn="_UserRelated_1v1vj_105",Y={topUser:Qn,topUserYou:Yn,placeAndAvatar:Gn,PlaceWrap:Jn,CoinCount:Kn,WalletInfo:Xn,UserRelated:Zn},er=({Wallet:e,count:t,place:s,isYou:r=!1,...n})=>i.jsxs("div",{onClick:r?a=>{console.log(a.currentTarget.offsetTop),a.currentTarget.parentElement.scrollTo({top:a.currentTarget.previousElementSibling.offsetTop}),console.log(a.currentTarget.offsetTop)}:void 0,...n,className:r?Y.topUserYou:Y.topUser,children:[i.jsxs("div",{className:Y.WalletInfo,children:[i.jsxs("div",{className:Y.UserRelated,children:[i.jsx("img",{src:"./avatar.svg",alt:`${e}'s avatar`}),i.jsx("p",{children:r?`You: ${e.slice(0,9)}...${e.slice(e.length-3)}`:i.jsxs(i.Fragment,{children:[e.slice(0,5),"...",e.slice(e.length-3)]})})]}),i.jsxs("div",{className:Y.CoinCount,children:[i.jsxs("p",{children:["~",t.toFixed(0)]}),i.jsx("img",{src:Ve})]})]}),i.jsx("div",{className:Y.placeAndAvatar,children:s<=2?i.jsx("img",{src:["./first-place.svg","./second-place.svg","./third-place.svg"][s]}):i.jsx("p",{className:Y.PlaceWrap,children:s+1})})]}),tr="_topWrapper_1338k_1",sr="_topPage_1338k_39",kt={topWrapper:tr,topPage:sr},nr=({onClose:e,onHelp:t,onLoad:s,onToast:r})=>{const n=st(),[a,o]=h.useState([]),[l,c]=h.useState(!0),[u,f]=h.useState(-1),y=xe();return h.useEffect(()=>{n.show();const m=n.on("click",e);return()=>{n.off("click",m),n.hide()}},[]),h.useEffect(()=>{y.get("tutorialToasts").then(m=>{console.log("TT:",m),m=="true"&&r(i.jsxs("span",{children:["Here you can track your progress and compete other players!",i.jsx("br",{}),i.jsx("br",{}),"Click anywhere to close the hint"]}))})},[y,r]),h.useEffect(()=>{fetch("https://tonapi.io/v2/jettons/0%3Acab0d1a4871a04d8ad72aa6f404e2d7c1e54b53202f203c72e95c9e0199c3066/holders?limit=1000&offset=0").then(async m=>{const p=await m.json();o(p.addresses),c(!1),s()}).catch(m=>{alert(`Unable to get Top right now! Perhaps you're refreshing it too often?
Error message: `+JSON.stringify(m))})},[]),i.jsxs("div",{className:kt.topPage,children:[i.jsx("div",{className:kt.topWrapper,children:l?"Loading...":a.map((m,p)=>i.jsx(er,{isYou:p==u,Wallet:m.owner.address,count:Number(m.balance),place:p},p))}),i.jsx(ot,{onClose:t})]})},rr="_toastManager_1600z_1",ir="_toast_1600z_1",ar="_bgImage_1600z_65",Xe={toastManager:rr,toast:ir,bgImage:ar},or=({children:e,onClick:t})=>{const s=h.useRef(),r=tt(e?[e]:[],{from:{opacity:0,transform:"rotate(-90deg)",marginLeft:"-300%"},enter:{opacity:1,transform:"rotate(0deg)",marginLeft:"0%"},leave:{opacity:0,transform:"rotate(-90deg)",marginLeft:"-300%"},onRest:()=>{console.log(s.current.style)},exitBeforeEnter:!0});return i.jsx("div",{ref:s,onClick:t,className:Xe.toastManager,children:r((n,a)=>i.jsxs(W.div,{style:n,className:Xe.toast,children:[i.jsx("img",{className:Xe.bgImage,src:"./toast.svg"}),a]}))})},lr=({onClose:e,onLoad:t})=>{const[s,r]=h.useState(!1),[n,a]=h.useState(!0),o=xe(),l=st();h.useEffect(()=>{o.get("tutorialComplete").then(f=>{console.log("tc:",f),r(JSON.parse(f)||!1),o.get("tutorialToasts").then(y=>{console.log("tt:",y),a(JSON.parse(y)),t()})})},[o]),h.useEffect(()=>{l.show();const f=l.on("click",()=>{e()});return()=>{l.off("click",f),l.hide()}},[]);const c=()=>{o.set("tutorialComplete",String(!s)).then(()=>{console.log(`Changed Tutorial: from ${s} to ${!s}`),r(!s)})},u=()=>{o.set("tutorialToasts",String(!n)).then(()=>{console.log(`Changed tutorialToasts: from ${n} to ${!n}`),a(!n)})};return i.jsxs("div",{children:[i.jsxs("button",{onClick:c,children:[s?"Disable":"Enable"," Tutorial"]}),i.jsxs("button",{onClick:u,children:["Tutorial Toasts: ",n?"✅":"❌"]})]})},Nt=""+new URL("../backgroundstart.png",import.meta.url).href,ur="_storePageGrid_1kh4d_1",cr="_shopTile_1kh4d_15",dr="_Controls_1kh4d_47",hr="_BuyPageWrap_1kh4d_77",fr="_maxedImage_1kh4d_129",pr="_pickedProductQuantity_1kh4d_137",G={storePageGrid:ur,shopTile:cr,Controls:dr,BuyPageWrap:hr,maxedImage:fr,pickedProductQuantity:pr},It=""+new URL("buybtn-9TMrWdhF.svg",import.meta.url).href,mr=""+new URL("backbtn-BX--gq_K.svg",import.meta.url).href,gr=({onClose:e,onHelp:t,onLoad:s,onToast:r})=>{const[n,a]=h.useState(null),[o,l]=h.useState(0),c=D({from:{left:n?"50%":"25%",opacity:+!n},to:{left:n?"25%":"50%",opacity:+!!n}}),u=D({from:{left:n?"50%":"75%"},to:{left:n?"75%":"50%"}}),f=D({from:{left:n?"-100%":"50%"},to:{left:n?"50%":"-100%"}}),y=D({from:{pointerEvents:n?"all":"none",opacity:+!!n},to:{pointerEvents:n?"none":"all",opacity:+!n}}),m={icon:_e,id:Math.floor(Math.random()*1e3),profit:10,description:"Lorem ipsum sit dolorem"};return h.useEffect(()=>{s()},[]),i.jsxs("div",{children:[i.jsx(W.div,{style:y,className:G.storePageGrid,children:Array(6).fill(m).map((p,g)=>i.jsxs("div",{className:G.shopTile,children:[i.jsx("img",{className:G.productImage,src:p.icon}),i.jsx($,{onClick:()=>{a(p)},bg:It})]},g))}),i.jsx(W.div,{style:f,className:[G.BuyPageWrap,"pixel-border"].join(" "),children:n?i.jsxs(i.Fragment,{children:[i.jsx("img",{className:G.maxedImage,src:n.icon,alt:"Worker Hat"}),i.jsx("p",{children:n.description}),i.jsxs("p",{children:[n.profit," ",o>0&&`(${n.profit*o})`," $POLU4KA / min "]}),i.jsxs("div",{className:G.pickedProductQuantity,children:[i.jsx("span",{onClick:()=>{l(Math.max(0,o-1))},children:"-"}),i.jsx("input",{value:o,onChange:p=>{let g=p.target.value.replace(/[^0-9]*/gim,"").slice(0,3);l(Number(g))}}),i.jsx("span",{onClick:()=>{l(Math.min(999,o+1))},children:"+"})]})]}):""}),i.jsxs("div",{className:G.Controls,children:[i.jsx(W.div,{style:{...c,pointerEvents:n?"all":"none"},children:i.jsx($,{onClick:p=>{alert("Купили")},bg:It})}),i.jsx(W.div,{style:u,children:i.jsx($,{bg:mr,onClick:()=>{n?a(null):e()}})})]})]})};function _r(){const[e,t]=h.useState(!0),[s,r]=h.useState(!1),n=xe(),[a,o]=h.useState("start"),[l,c]=h.useState(!0),[u,f]=h.useState("main"),[y,m]=h.useState(!1);h.useState(!0);const p="/21 000 000";h.useState("");const[g,x]=h.useState(!1),[b,M]=h.useState(()=>{}),[j,C]=h.useState(""),S=ss(),k=ns(),V={Loading:Nt,start:Nt,main:"./backgroundmain.png",referral:"./backgroundref.png","top buyers":"./backgroundtop.png"},[z,oe]=h.useState(V.start),T=h.useCallback(()=>{n.set("tutorialComplete","true"),console.log("goingTo: ",u),setTimeout(()=>{F(u,{hasLogo:u=="main",hasHeader:u=="main",logoMinimized:!0})},500)},[u,n]),O=()=>{f(a),F("start",{hasLogo:!0,helpHidden:!0})},K=()=>{F(u,{hasLogo:u=="main",hasHeader:u=="main",logoMinimized:!0})},Qt=()=>{f(a),F("settings",{hasLogo:!1,helpHidden:!1})},F=(N,E={hasLogo:!1,hasHeader:!1,hasToLoad:!1,logoMinimized:!1})=>{E.hasToLoad&&t(!0),oe(V[N]),m(!E.hasLogo),c(!E.hasHeader),r(E.logoMinimized),o(N),t(!0)},X=()=>{t(!1)},Yt=tt([a],{from:{translateY:"300%"},enter:{translateY:"0%"},leave:{translateY:"300%"},exitBeforeEnter:!0}),Gt={Loading:"Loading...",start:i.jsx(Ds,{onLoad:X,onToast:C,onClose:T}),main:i.jsx(Hn,{onLoad:X,onToast:C,onClose:F}),referral:i.jsx(qn,{onLoad:X,onToast:C,onHelp:O,onClose:()=>{F("main",{hasLogo:!0,hasHeader:!0,logoMinimized:!0})}}),"top buyers":i.jsx(nr,{onLoad:X,onToast:C,onHelp:O,onClose:()=>{F("main",{hasLogo:!0,hasHeader:!0,logoMinimized:!0})}}),store:i.jsx(gr,{onLoad:X,onToast:C,onHelp:O,onClose:()=>{F("main",{hasLogo:!0,hasHeader:!0,logoMinimized:!0})}}),settings:i.jsx(lr,{onLoad:X,onClose:K})};return h.useEffect(()=>(console.log("new call",g,a,b),a=="main"?x(!1):g!==!1&&(console.log("!!!!!!"),a=="main"?(g.delete().type("0"+p),console.log("startin"),b()):g.delete().type(a)),()=>{try{g.delete(!0)}catch{}}),[b,g,a,T]),h.useEffect(()=>{console.log(n),n.get("tutorialComplete").then(N=>{t(!1);const E=JSON.parse(N);console.log(E),o(E?"main":"start"),c(!E)})},[n]),h.useEffect(()=>{k.enableConfirmation()}),h.useEffect(()=>{S.show();const N=S.on("click",()=>{Qt()});return a=="settings"&&S.hide(),()=>{N()}},[S,a,u]),i.jsxs("main",{children:[i.jsx(Ys,{bgArray:V,background:z}),i.jsx(Is,{hidden:l}),i.jsx(Ws,{minimized:s,hidden:y,onClick:()=>{r(!s)}}),i.jsx(Ks,{hidden:["start","store"].includes(a),children:i.jsx(ve,{separator:" ",redraw:a!="main",start:0,end:19399333,suffix:p,children:({countUpRef:N,start:E})=>i.jsxs("div",{children:[a!="main"?i.jsx(Vn,{getAfterInit:lt=>(x(lt),M(E),lt),options:{cursor:!1,waitUntilVisible:!0}}):"",i.jsx("span",{style:{position:a!="main"?"fixed":"relative",opacity:+(a=="main")},ref:N})]})})}),i.jsx(Kt,{isLoading:e}),Yt((N,E)=>i.jsx(W.div,{style:{...N,transition:"0.1s 0.3s transform ease-out",translateY:e?"300%":"0%"},children:Gt[E]})),i.jsx(or,{onClick:()=>{C("")},children:j})]})}export{_r as default};
