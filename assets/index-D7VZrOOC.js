import{r as f,j as ft}from"./index-0vU8cr3h.js";var Yt=Object.defineProperty,Zt=(e,t,s)=>t in e?Yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,h=(e,t,s)=>(Zt(e,typeof t!="symbol"?t+"":t,s),s);function mt(e,t){let s;const n=()=>{s!==void 0&&t&&t(s),s=void 0};return[()=>s===void 0?s=e(n):s,n]}function bt(e){const t=G(),{count:s}=t;t.unsubscribe(e),s&&!t.count&&Ee()}function Xt(e){return G().subscribe(e),()=>bt(e)}class te{constructor(t,s={}){this.scope=t,this.options=s}print(t,...s){const n=new Date,r=Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",fractionalSecondDigits:3,timeZone:"UTC"}).format(n),{textColor:i,bgColor:a}=this.options,o="font-weight: bold;padding: 0 5px;border-radius:5px";console[t](`%c${r}%c / %c${this.scope}`,`${o};background-color: lightblue;color:black`,"",`${o};${i?`color:${i};`:""}${a?`background-color:${a}`:""}`,...s)}error(...t){this.print("error",...t)}log(...t){this.print("log",...t)}}const U=new te("SDK",{bgColor:"forestgreen",textColor:"white"});let X=!1;const lt=({event:e,args:[t]})=>{U.log("Event received:",t===void 0?{name:e}:{name:e,data:t})};function ee(e){X!==e&&(X=e,e?Xt(lt):bt(lt))}function se(...e){X&&U.log(...e)}class H{constructor(){h(this,"listeners",new Map),h(this,"listenersCount",0),h(this,"subscribeListeners",[])}clear(){this.listeners.clear(),this.subscribeListeners=[]}get count(){return this.listenersCount+this.subscribeListeners.length}emit(t,...s){this.subscribeListeners.forEach(n=>n({event:t,args:s})),(this.listeners.get(t)||[]).forEach(([n,r])=>{n(...s),r&&this.off(t,n)})}on(t,s,n){let r=this.listeners.get(t);return r||this.listeners.set(t,r=[]),r.push([s,n]),this.listenersCount+=1,()=>this.off(t,s)}off(t,s){const n=this.listeners.get(t)||[];for(let r=0;r<n.length;r+=1)if(s===n[r][0]){n.splice(r,1),this.listenersCount-=1;return}}subscribe(t){return this.subscribeListeners.push(t),()=>this.unsubscribe(t)}unsubscribe(t){for(let s=0;s<this.subscribeListeners.length;s+=1)if(this.subscribeListeners[s]===t){this.subscribeListeners.splice(s,1);return}}}function tt(e,t,s){return window.addEventListener(e,t,s),()=>window.removeEventListener(e,t,s)}class W extends Error{constructor(t,s,n){super(s,{cause:n}),this.type=t,Object.setPrototypeOf(this,W.prototype)}}function d(e,t,s){return new W(e,t,s)}const ne="ERR_METHOD_UNSUPPORTED",re="ERR_METHOD_PARAMETER_UNSUPPORTED",ie="ERR_UNKNOWN_ENV",ae="ERR_INVOKE_CUSTOM_METHOD_RESPONSE",oe="ERR_TIMED_OUT",he="ERR_UNEXPECTED_TYPE",vt="ERR_PARSE",ce="ERR_NAVIGATION_LIST_EMPTY",pe="ERR_NAVIGATION_CURSOR_INVALID",on="ERR_NAVIGATION_ITEM_INVALID",st="ERR_SSR_INIT",ue="ERR_SSR_POST_EVENT",le="ERR_INVALID_PATH_BASE";function A(){return d(he,"Value has unexpected type")}class j{constructor(t,s,n){this.parser=t,this.isOptional=s,this.type=n}parse(t){if(!(this.isOptional&&t===void 0))try{return this.parser(t)}catch(s){throw d(vt,`Unable to parse value${this.type?` as ${this.type}`:""}`,s)}}optional(){return this.isOptional=!0,this}}function I(e,t){return()=>new j(e,!1,t)}const R=I(e=>{if(typeof e=="boolean")return e;const t=String(e);if(t==="1"||t==="true")return!0;if(t==="0"||t==="false")return!1;throw A()},"boolean");function yt(e,t){const s={};for(const n in e){const r=e[n];if(!r)continue;let i,a;if(typeof r=="function"||"parse"in r)i=n,a=typeof r=="function"?r:r.parse.bind(r);else{const{type:o}=r;i=r.from||n,a=typeof o=="function"?o:o.parse.bind(o)}try{const o=a(t(i));o!==void 0&&(s[n]=o)}catch(o){throw d(vt,`Unable to parse field "${n}"`,o)}}return s}function nt(e){let t=e;if(typeof t=="string"&&(t=JSON.parse(t)),typeof t!="object"||t===null||Array.isArray(t))throw A();return t}function m(e,t){return new j(s=>{const n=nt(s);return yt(e,r=>n[r])},!1,t)}const S=I(e=>{if(typeof e=="number")return e;if(typeof e=="string"){const t=Number(e);if(!Number.isNaN(t))return t}throw A()},"number");function rt(e){return/^#[\da-f]{6}$/i.test(e)}function de(e){return/^#[\da-f]{3}$/i.test(e)}function Et(e){const t=e.replace(/\s/g,"").toLowerCase();if(rt(t))return t;if(de(t)){let n="#";for(let r=0;r<3;r+=1)n+=t[1+r].repeat(2);return n}const s=t.match(/^rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)$/)||t.match(/^rgba\((\d{1,3}),(\d{1,3}),(\d{1,3}),\d{1,3}\)$/);if(!s)throw new Error(`Value "${e}" does not satisfy any of known RGB formats.`);return s.slice(1).reduce((n,r)=>{const i=parseInt(r,10).toString(16);return n+(i.length===1?"0":"")+i},"#")}const c=I(e=>{if(typeof e=="string"||typeof e=="number")return e.toString();throw A()},"string"),Pt=I(e=>Et(c().parse(e)),"rgb");function _e(e){return m({eventType:c(),eventData:t=>t}).parse(e)}function ge(){["TelegramGameProxy_receiveEvent","TelegramGameProxy","Telegram"].forEach(e=>{delete window[e]})}function we(e,t){window.dispatchEvent(new MessageEvent("message",{data:JSON.stringify({eventType:e,eventData:t}),source:window.parent}))}function fe(){[["TelegramGameProxy_receiveEvent"],["TelegramGameProxy","receiveEvent"],["Telegram","WebView","receiveEvent"]].forEach(e=>{let t=window;e.forEach((s,n,r)=>{if(n===r.length-1){t[s]=we;return}s in t||(t[s]={}),t=t[s]})})}const me=m({button_id:e=>e==null?void 0:c().parse(e)}),be={clipboard_text_received:m({req_id:c(),data:e=>e===null?e:c().optional().parse(e)}),custom_method_invoked:m({req_id:c(),result:e=>e,error:c().optional()}),invoice_closed:m({slug:c(),status:c()}),phone_requested:m({status:c()}),popup_closed:{parse:e=>me.parse(e??{})},qr_text_received:m({data:c().optional()}),theme_changed:m({theme_params:e=>{const t=Pt().optional();return Object.entries(nt(e)).reduce((s,[n,r])=>(s[n]=t.parse(r),s),{})}}),viewport_changed:m({height:S(),width:e=>e==null?window.innerWidth:S().parse(e),is_state_stable:R(),is_expanded:R()}),write_access_requested:m({status:c()})};function ve(){const e=new H;fe();let t=[ge,tt("resize",()=>{e.emit("viewport_changed",{width:window.innerWidth,height:window.innerHeight,is_state_stable:!0,is_expanded:!0})}),tt("message",s=>{if(s.source!==window.parent)return;let n;try{n=_e(s.data)}catch{return}const{eventType:r,eventData:i}=n,a=be[r];try{const o=a?a.parse(i):i;e.emit(...o?[r,o]:[r])}catch(o){U.error(`An error occurred processing the "${r}" event from the Telegram application. Please, file an issue here: https://github.com/Telegram-Mini-Apps/tma.js/issues/new/choose`,n,o)}}),()=>e.clear()];return[e,()=>{t.forEach(s=>s()),t=[]}]}const[ye,Ee]=mt(e=>{const[t,s]=ve(),n=t.off.bind(t);return t.off=(r,i)=>{const{count:a}=t;n(r,i),a&&!t.count&&e()},[t,s]},([,e])=>e());function G(){return ye()[0]}function z(e,t){G().off(e,t)}function P(e,t,s){return G().on(e,t,s)}function V(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}function Pe(e,t){const s=e.split("."),n=t.split("."),r=Math.max(s.length,n.length);for(let i=0;i<r;i+=1){const a=parseInt(s[i]||"0",10),o=parseInt(n[i]||"0",10);if(a!==o)return a>o?1:-1}return 0}function E(e,t){return Pe(e,t)<=0}function C(e,t,s){if(typeof s=="string"){if(e==="web_app_open_link"&&t==="try_instant_view")return E("6.4",s);if(e==="web_app_set_header_color"&&t==="color")return E("6.9",s)}switch(e){case"web_app_open_tg_link":case"web_app_open_invoice":case"web_app_setup_back_button":case"web_app_set_background_color":case"web_app_set_header_color":case"web_app_trigger_haptic_feedback":return E("6.1",t);case"web_app_open_popup":return E("6.2",t);case"web_app_close_scan_qr_popup":case"web_app_open_scan_qr_popup":case"web_app_read_text_from_clipboard":return E("6.4",t);case"web_app_switch_inline_query":return E("6.7",t);case"web_app_invoke_custom_method":case"web_app_request_write_access":case"web_app_request_phone":return E("6.9",t);case"web_app_setup_settings_button":return E("6.10",t);case"web_app_biometry_get_info":case"web_app_biometry_open_settings":case"web_app_biometry_request_access":case"web_app_biometry_request_auth":case"web_app_biometry_update_token":return E("7.2",t);default:return["iframe_ready","iframe_will_reload","web_app_close","web_app_data_send","web_app_expand","web_app_open_link","web_app_ready","web_app_request_theme","web_app_request_viewport","web_app_setup_main_button","web_app_setup_closing_behavior"].includes(e)}}function Re(e){return"external"in e&&V(e.external)&&"notify"in e.external&&typeof e.external.notify=="function"}function Rt(e){return"TelegramWebviewProxy"in e&&V(e.TelegramWebviewProxy)&&"postEvent"in e.TelegramWebviewProxy&&typeof e.TelegramWebviewProxy.postEvent=="function"}function xt(){try{return window.self!==window.top}catch{return!0}}let St="https://web.telegram.org";function hn(e){St=e}function xe(){return St}function N(e,t,s){let n={},r;t===void 0&&s===void 0?n={}:t!==void 0&&s!==void 0?(n=s,r=t):t!==void 0&&("targetOrigin"in t?n=t:r=t);const{targetOrigin:i=xe()}=n;if(se("Posting event:",r?{event:e,data:r}:{event:e}),xt()){window.parent.postMessage(JSON.stringify({eventType:e,eventData:r}),i);return}if(Re(window)){window.external.notify(JSON.stringify({eventType:e,eventData:r}));return}if(Rt(window)){window.TelegramWebviewProxy.postEvent(e,JSON.stringify(r));return}throw d(ie,"Unable to determine current environment and possible way to send event. You are probably trying to use Mini Apps method outside of Telegram application environment.")}function Se(e){return(t,s)=>{if(!C(t,e))throw d(ne,`Method "${t}" is unsupported in Mini Apps version ${e}`);if(V(s)){let n;if(t==="web_app_open_link"&&"try_instant_view"in s?n="try_instant_view":t==="web_app_set_header_color"&&"color"in s&&(n="color"),n&&!C(t,n,e))throw d(re,`Parameter "${n}" of "${t}" method is unsupported in Mini Apps version ${e}`)}return N(t,s)}}function Ct(e){return({req_id:t})=>t===e}function Tt(e){return d(oe,`Timeout reached: ${e}ms`)}function At(e,t){return Promise.race([typeof e=="function"?e():e,new Promise((s,n)=>{setTimeout(()=>{n(Tt(t))},t)})])}async function b(e){let t;const s=new Promise(u=>{t=u}),{method:n,event:r,capture:i,postEvent:a=N,timeout:o}=e,p=(Array.isArray(r)?r:[r]).map(u=>P(u,l=>(!i||i(l))&&t(l)));try{return a(n,e.params),await(o?At(s,o):s)}finally{p.forEach(u=>u())}}async function q(e,t,s,n={}){const{result:r,error:i}=await b({...n,method:"web_app_invoke_custom_method",event:"custom_method_invoked",params:{method:e,params:t,req_id:s},capture:Ct(s)});if(i)throw d(ae,i);return r}function et(...e){return e.map(t=>{if(typeof t=="string")return t;if(V(t))return et(Object.entries(t).map(s=>s[1]&&s[0]));if(Array.isArray(t))return et(...t)}).filter(Boolean).join(" ")}function cn(...e){return e.reduce((t,s)=>(V(s)&&Object.entries(s).forEach(([n,r])=>{const i=et(t[n],r);i.length&&(t[n]=i)}),t),{})}function It(e){const t=Et(e);return Math.sqrt([.299,.587,.114].reduce((s,n,r)=>{const i=parseInt(t.slice(1+r*2,1+(r+1)*2),16);return s+i*i*n},0))<120}class Ce{constructor(t){h(this,"ee",new H),h(this,"on",this.ee.on.bind(this.ee)),h(this,"off",this.ee.off.bind(this.ee)),this.state=t}clone(){return{...this.state}}set(t,s){Object.entries(typeof t=="string"?{[t]:s}:t).reduce((n,[r,i])=>this.state[r]===i||i===void 0?n:(this.state[r]=i,this.ee.emit(`change:${r}`,i),!0),!1)&&this.ee.emit("change",this.state)}get(t){return this.state[t]}}class it{constructor(t){h(this,"state"),h(this,"get"),h(this,"set"),h(this,"clone"),this.state=new Ce(t),this.set=this.state.set.bind(this.state),this.get=this.state.get.bind(this.state),this.clone=this.state.clone.bind(this.state)}}function kt(e,t){return s=>C(t[s],e)}class at extends it{constructor(t,s,n){super(t),h(this,"supports"),this.supports=kt(s,n)}}class Te extends at{constructor(t,s,n){super({isVisible:t},s,{show:"web_app_setup_back_button",hide:"web_app_setup_back_button"}),h(this,"on",(r,i)=>r==="click"?P("back_button_pressed",i):this.state.on(r,i)),h(this,"off",(r,i)=>r==="click"?z("back_button_pressed",i):this.state.off(r,i)),this.postEvent=n}set isVisible(t){this.set("isVisible",t),this.postEvent("web_app_setup_back_button",{is_visible:t})}get isVisible(){return this.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}function T(){return typeof window>"u"}const qt=I(e=>e instanceof Date?e:new Date(S().parse(e)*1e3),"Date");function ot(e,t){return new j(s=>{if(typeof s!="string"&&!(s instanceof URLSearchParams))throw A();const n=typeof s=="string"?new URLSearchParams(s):s;return yt(e,r=>{const i=n.get(r);return i===null?void 0:i})},!1,t)}const Ae=m({id:S(),type:c(),title:c(),photoUrl:{type:c().optional(),from:"photo_url"},username:c().optional()},"Chat").optional(),dt=m({addedToAttachmentMenu:{type:R().optional(),from:"added_to_attachment_menu"},allowsWriteToPm:{type:R().optional(),from:"allows_write_to_pm"},firstName:{type:c(),from:"first_name"},id:S(),isBot:{type:R().optional(),from:"is_bot"},isPremium:{type:R().optional(),from:"is_premium"},languageCode:{type:c().optional(),from:"language_code"},lastName:{type:c().optional(),from:"last_name"},photoUrl:{type:c().optional(),from:"photo_url"},username:c().optional()},"User").optional();function Ot(){return ot({authDate:{type:qt(),from:"auth_date"},canSendAfter:{type:S().optional(),from:"can_send_after"},chat:Ae,chatInstance:{type:c().optional(),from:"chat_instance"},chatType:{type:c().optional(),from:"chat_type"},hash:c(),queryId:{type:c().optional(),from:"query_id"},receiver:dt,startParam:{type:c().optional(),from:"start_param"},user:dt},"InitData")}function Ie(e){return e.replace(/_[a-z]/g,t=>t[1].toUpperCase())}function ke(e){return e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`)}const Nt=I(e=>{const t=Pt().optional();return Object.entries(nt(e)).reduce((s,[n,r])=>(s[Ie(n)]=t.parse(r),s),{})},"ThemeParams");function Dt(e){return ot({botInline:{type:R().optional(),from:"tgWebAppBotInline"},initData:{type:Ot().optional(),from:"tgWebAppData"},initDataRaw:{type:c().optional(),from:"tgWebAppData"},platform:{type:c(),from:"tgWebAppPlatform"},showSettings:{type:R().optional(),from:"tgWebAppShowSettings"},startParam:{type:c().optional(),from:"tgWebAppStartParam"},themeParams:{type:Nt(),from:"tgWebAppThemeParams"},version:{type:c(),from:"tgWebAppVersion"}}).parse(e)}function Vt(e){return Dt(e.replace(/^[^?#]*[?#]/,"").replace(/[?#]/g,"&"))}function qe(){return Vt(window.location.href)}function Bt(){return performance.getEntriesByType("navigation")[0]}function Oe(){const e=Bt();if(!e)throw new Error("Unable to get first navigation entry.");return Vt(e.name)}function Mt(e){return`tma.js/${e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}`}function $t(e,t){sessionStorage.setItem(Mt(e),JSON.stringify(t))}function Lt(e){const t=sessionStorage.getItem(Mt(e));try{return t?JSON.parse(t):void 0}catch{}}function Ne(){return Dt(Lt("launchParams")||"")}function De(e){return JSON.stringify(Object.fromEntries(Object.entries(e).map(([t,s])=>[ke(t),s])))}function Ve(e){const{initDataRaw:t,themeParams:s,platform:n,version:r,showSettings:i,startParam:a,botInline:o}=e,p=new URLSearchParams;return p.set("tgWebAppPlatform",n),p.set("tgWebAppThemeParams",De(s)),p.set("tgWebAppVersion",r),t&&p.set("tgWebAppData",t),a&&p.set("tgWebAppStartParam",a),typeof i=="boolean"&&p.set("tgWebAppShowSettings",i?"1":"0"),typeof o=="boolean"&&p.set("tgWebAppBotInline",o?"1":"0"),p.toString()}function Be(e){$t("launchParams",Ve(e))}function Ut(){for(const e of[qe,Oe,Ne])try{const t=e();return Be(t),t}catch{}throw new Error("Unable to retrieve launch parameters from any known source.")}function Ht(){const e=Bt();return!!(e&&e.type==="reload")}function Me(){let e=0;return()=>(e+=1).toString()}const[$e]=mt(Me);function _(e,t){return({ssr:s}={})=>{let n;if(T()){if(!s)throw d(st,"ssr.options must be specified to initialize component on the server side");n=s}else n=Ut();const r={...n,postEvent:"version"in n?Se(n.version):()=>{throw d(ue,"postEvent function is forbidden to be called on the server side.")},createRequestId:$e()};if(T()||typeof e=="function")return typeof e=="function"?e(r):t(r);const i=t({...r,state:Ht()?Lt(e):void 0}),a=o=>(o.on("change",p=>{$t(e,p)}),o);return i instanceof Promise?i.then(a):a(i)}}const Le=_("backButton",({postEvent:e,version:t,state:s={isVisible:!1}})=>new Te(s.isVisible,t,e));class B extends at{constructor(){super(...arguments),h(this,"on",this.state.on.bind(this.state)),h(this,"off",this.state.off.bind(this.state))}}function Wt(e){const t=e.available?e:{available:!1,device_id:"",token_saved:!1,access_requested:!1,access_granted:!1,type:""};return{available:!0,type:t.type,deviceId:t.device_id,tokenSaved:t.token_saved,accessRequested:t.access_requested,accessGranted:t.access_granted}}class _t extends B{constructor({postEvent:t,version:s,...n}){super(n,s,{auth:"web_app_biometry_request_auth",openSettings:"web_app_biometry_open_settings",requestAccess:"web_app_biometry_request_access",updateToken:"web_app_biometry_update_token"}),h(this,"postEvent"),h(this,"authPromise"),h(this,"accessPromise"),this.postEvent=t}get available(){return this.get("available")}get accessGranted(){return this.get("accessGranted")}get accessRequested(){return this.get("accessRequested")}async authenticate({reason:t,...s}){return this.authPromise||(this.authPromise=b({...s,method:"web_app_biometry_request_auth",event:"biometry_auth_requested",postEvent:this.postEvent,params:{reason:(t||"").trim()}}).then(({token:n})=>n).finally(()=>this.authPromise=void 0)),this.authPromise}get deviceId(){return this.get("deviceId")}openSettings(){this.postEvent("web_app_biometry_open_settings")}requestAccess({reason:t,...s}={}){return this.accessPromise||(this.accessPromise=b({...s,postEvent:this.postEvent,method:"web_app_biometry_request_access",event:"biometry_info_received",params:{reason:t||""}}).then(n=>{const r=Wt(n);return this.set(r),r.accessGranted}).finally(()=>this.accessPromise=void 0)),this.accessPromise}get biometryType(){return this.get("biometryType")}get tokenSaved(){return this.get("tokenSaved")}async updateToken({token:t,...s}={}){return["removed","updated"].includes((await b({...s,postEvent:this.postEvent,method:"web_app_biometry_update_token",event:"biometry_token_updated",params:{token:t||""}})).status)}}async function Ue(e){return Wt(await b({...e||{},method:"web_app_biometry_get_info",event:"biometry_info_received"}))}const He=_("biometryManager",async({postEvent:e,version:t,state:s})=>{if(s)return new _t({...s,version:t,postEvent:e});if(T())throw d(st,"BiometryManager cannot be instantiated on the server side without passing the ssr.state object.");return new _t({...await Ue({timeout:1e3}),version:t,postEvent:e})});class ht extends it{constructor(){super(...arguments),h(this,"on",this.state.on.bind(this.state)),h(this,"off",this.state.off.bind(this.state))}}class We extends ht{constructor(t,s){super({isConfirmationNeeded:t}),this.postEvent=s}set isConfirmationNeeded(t){this.set("isConfirmationNeeded",t),this.postEvent("web_app_setup_closing_behavior",{need_confirmation:t})}get isConfirmationNeeded(){return this.get("isConfirmationNeeded")}disableConfirmation(){this.isConfirmationNeeded=!1}enableConfirmation(){this.isConfirmationNeeded=!0}}const je=_("closingBehavior",({postEvent:e,state:t={isConfirmationNeeded:!1}})=>new We(t.isConfirmationNeeded,e));class ct{constructor(t,s){h(this,"supports"),this.supports=kt(t,s)}}function Ge(e){if(Array.isArray(e))return e;if(typeof e=="string")try{const t=JSON.parse(e);if(Array.isArray(t))return t}catch{}throw A()}class ze extends j{constructor(t,s,n){super(Ge,s,n),h(this,"itemParser"),this.itemParser=typeof t=="function"?t:t.parse.bind(t)}parse(t){const s=super.parse(t);return s===void 0?s:s.map(this.itemParser)}of(t){return this.itemParser=typeof t=="function"?t:t.parse.bind(t),this}}function Ke(e){return new ze(t=>t,!1,e)}function gt(e,t){return Object.fromEntries(e.map(s=>[s,t]))}class Je extends ct{constructor(t,s,n){super(t,{delete:"web_app_invoke_custom_method",get:"web_app_invoke_custom_method",getKeys:"web_app_invoke_custom_method",set:"web_app_invoke_custom_method"}),this.createRequestId=s,this.postEvent=n}async delete(t,s={}){const n=Array.isArray(t)?t:[t];n.length&&await q("deleteStorageValues",{keys:n},this.createRequestId(),{...s,postEvent:this.postEvent})}async getKeys(t={}){return Ke().of(c()).parse(await q("getStorageKeys",{},this.createRequestId(),{...t,postEvent:this.postEvent}))}async get(t,s={}){const n=Array.isArray(t)?t:[t];if(!n.length)return gt(n,"");const r=await q("getStorageValues",{keys:n},this.createRequestId(),{...s,postEvent:this.postEvent}),i=m(gt(n,c()),"CloudStorageData").parse(r);return Array.isArray(t)?i:i[t]}async set(t,s,n={}){await q("saveStorageValue",{key:t,value:s},this.createRequestId(),{...n,postEvent:this.postEvent})}}const Qe=_(({createRequestId:e,postEvent:t,version:s})=>new Je(s,e,t));class Fe extends ct{constructor(t,s){super(t,{impactOccurred:"web_app_trigger_haptic_feedback",notificationOccurred:"web_app_trigger_haptic_feedback",selectionChanged:"web_app_trigger_haptic_feedback"}),this.postEvent=s}impactOccurred(t){this.postEvent("web_app_trigger_haptic_feedback",{type:"impact",impact_style:t})}notificationOccurred(t){this.postEvent("web_app_trigger_haptic_feedback",{type:"notification",notification_type:t})}selectionChanged(){this.postEvent("web_app_trigger_haptic_feedback",{type:"selection_change"})}}const Ye=_(({version:e,postEvent:t})=>new Fe(e,t));class Ze{constructor(t){this.initData=t}get authDate(){return this.initData.authDate}get canSendAfter(){return this.initData.canSendAfter}get canSendAfterDate(){const{canSendAfter:t}=this;return t?new Date(this.authDate.getTime()+t*1e3):void 0}get chat(){return this.initData.chat}get chatType(){return this.initData.chatType}get chatInstance(){return this.initData.chatInstance}get hash(){return this.initData.hash}get queryId(){return this.initData.queryId}get receiver(){return this.initData.receiver}get startParam(){return this.initData.startParam}get user(){return this.initData.user}}const Xe=_(({initData:e})=>e?new Ze(e):void 0);function pn(e){return Ot().parse(e)}class ts extends B{constructor(t,s,n){super({isOpened:t},s,{open:"web_app_open_invoice"}),this.postEvent=n}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t,s){if(this.isOpened)throw new Error("Invoice is already opened");let n;if(!s)n=t;else{const{hostname:r,pathname:i}=new URL(t,window.location.href);if(r!=="t.me")throw new Error(`Incorrect hostname: ${r}`);const a=i.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/);if(!a)throw new Error('Link pathname has incorrect format. Expected to receive "/invoice/{slug}" or "/${slug}"');[,,n]=a}this.isOpened=!0;try{return(await b({method:"web_app_open_invoice",event:"invoice_closed",params:{slug:n},postEvent:this.postEvent,capture(r){return n===r.slug}})).status}finally{this.isOpened=!1}}}const es=_(({version:e,postEvent:t})=>new ts(!1,e,t));class ss extends it{constructor({postEvent:t,...s}){super(s),h(this,"postEvent"),h(this,"on",(n,r)=>n==="click"?P("main_button_pressed",r):this.state.on(n,r)),h(this,"off",(n,r)=>n==="click"?z("main_button_pressed",r):this.state.off(n,r)),this.postEvent=t}commit(){this.text!==""&&this.postEvent("web_app_setup_main_button",{is_visible:this.isVisible,is_active:this.isEnabled,is_progress_visible:this.isLoaderVisible,text:this.text,color:this.backgroundColor,text_color:this.textColor})}set isEnabled(t){this.setParams({isEnabled:t})}get isEnabled(){return this.get("isEnabled")}set isLoaderVisible(t){this.setParams({isLoaderVisible:t})}get isLoaderVisible(){return this.get("isLoaderVisible")}set isVisible(t){this.setParams({isVisible:t})}get isVisible(){return this.get("isVisible")}get backgroundColor(){return this.get("backgroundColor")}get text(){return this.get("text")}get textColor(){return this.get("textColor")}disable(){return this.isEnabled=!1,this}enable(){return this.isEnabled=!0,this}hide(){return this.isVisible=!1,this}hideLoader(){return this.isLoaderVisible=!1,this}show(){return this.isVisible=!0,this}showLoader(){return this.isLoaderVisible=!0,this}setText(t){return this.setParams({text:t})}setTextColor(t){return this.setParams({textColor:t})}setBackgroundColor(t){return this.setParams({backgroundColor:t})}setParams(t){return this.set(t),this.commit(),this}}const ns=_("mainButton",({postEvent:e,themeParams:t,state:s={isVisible:!1,isEnabled:!1,text:"",isLoaderVisible:!1,textColor:t.buttonTextColor||"#ffffff",backgroundColor:t.buttonColor||"#000000"}})=>new ss({...s,postEvent:e}));function rs(){return ot({contact:m({userId:{type:S(),from:"user_id"},phoneNumber:{type:c(),from:"phone_number"},firstName:{type:c(),from:"first_name"},lastName:{type:c().optional(),from:"last_name"}}),authDate:{type:qt(),from:"auth_date"},hash:c()},"RequestedContact")}function jt(e,t){return s=>{const[n,r]=t[s];return C(n,r,e)}}function is(e){return new Promise(t=>{setTimeout(t,e)})}class as extends B{constructor({postEvent:t,createRequestId:s,version:n,botInline:r,...i}){super(i,n,{requestPhoneAccess:"web_app_request_phone",requestWriteAccess:"web_app_request_write_access",switchInlineQuery:"web_app_switch_inline_query",setHeaderColor:"web_app_set_header_color",setBackgroundColor:"web_app_set_background_color"}),h(this,"botInline"),h(this,"postEvent"),h(this,"createRequestId"),h(this,"requestPhoneAccessPromise"),h(this,"requestWriteAccessPromise"),h(this,"supportsParam"),this.createRequestId=s,this.postEvent=t,this.botInline=r;const a=this.supports.bind(this);this.supports=o=>a(o)?o!=="switchInlineQuery"||r:!1,this.supportsParam=jt(n,{"setHeaderColor.color":["web_app_set_header_color","color"]})}async getRequestedContact({timeout:t=1e4}={}){return rs().parse(await q("getRequestedContact",{},this.createRequestId(),{postEvent:this.postEvent,timeout:t}))}get bgColor(){return this.get("bgColor")}close(){this.postEvent("web_app_close")}get headerColor(){return this.get("headerColor")}get isBotInline(){return this.botInline}get isDark(){return It(this.bgColor)}ready(){this.postEvent("web_app_ready")}async requestContact({timeout:t=5e3}={}){try{return await this.getRequestedContact()}catch{}if(await this.requestPhoneAccess()!=="sent")throw new Error("Access denied.");const s=Date.now()+t;let n=50;return At(async()=>{for(;Date.now()<s;){try{return await this.getRequestedContact()}catch{}await is(n),n+=50}throw Tt(t)},t)}async requestPhoneAccess(t={}){return this.requestPhoneAccessPromise||(this.requestPhoneAccessPromise=b({...t,method:"web_app_request_phone",event:"phone_requested",postEvent:this.postEvent}).then(({status:s})=>s).finally(()=>this.requestPhoneAccessPromise=void 0)),this.requestPhoneAccessPromise}async requestWriteAccess(t={}){return this.requestWriteAccessPromise||(this.requestWriteAccessPromise=b({...t,method:"web_app_request_write_access",event:"write_access_requested",postEvent:this.postEvent}).then(({status:s})=>s).finally(()=>this.requestWriteAccessPromise=void 0)),this.requestWriteAccessPromise}sendData(t){const{size:s}=new Blob([t]);if(!s||s>4096)throw new Error(`Passed data has incorrect size: ${s}`);this.postEvent("web_app_data_send",{data:t})}setHeaderColor(t){this.postEvent("web_app_set_header_color",rt(t)?{color:t}:{color_key:t}),this.set("headerColor",t)}setBgColor(t){this.postEvent("web_app_set_background_color",{color:t}),this.set("bgColor",t)}switchInlineQuery(t,s=[]){if(!this.supports("switchInlineQuery")&&!this.isBotInline)throw new Error("Method is unsupported because Mini App should be launched in inline mode.");this.postEvent("web_app_switch_inline_query",{query:t,chat_types:s})}}const os=_("miniApp",({themeParams:e,botInline:t=!1,state:s={bgColor:e.bgColor||"#ffffff",headerColor:e.headerBgColor||"#000000"},...n})=>new as({...n,...s,botInline:t}));function hs(e){const t=e.message.trim(),s=(e.title||"").trim(),n=e.buttons||[];let r;if(s.length>64)throw new Error(`Title has incorrect size: ${s.length}`);if(!t.length||t.length>256)throw new Error(`Message has incorrect size: ${t.length}`);if(n.length>3)throw new Error(`Buttons have incorrect size: ${n.length}`);return n.length?r=n.map(i=>{const{id:a=""}=i;if(a.length>64)throw new Error(`Button ID has incorrect size: ${a}`);if(!i.type||i.type==="default"||i.type==="destructive"){const o=i.text.trim();if(!o.length||o.length>64){const p=i.type||"default";throw new Error(`Button text with type "${p}" has incorrect size: ${i.text.length}`)}return{...i,text:o,id:a}}return{...i,id:a}}):r=[{type:"close",id:""}],{title:s,message:t,buttons:r}}class cs extends B{constructor(t,s,n){super({isOpened:t},s,{open:"web_app_open_popup"}),this.postEvent=n}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t){if(this.isOpened)throw new Error("Popup is already opened.");this.isOpened=!0;try{const{button_id:s=null}=await b({event:"popup_closed",method:"web_app_open_popup",postEvent:this.postEvent,params:hs(t)});return s}finally{this.isOpened=!1}}}const ps=_(({postEvent:e,version:t})=>new cs(!1,t,e));class us extends B{constructor(t,s,n){super({isOpened:t},s,{close:"web_app_close_scan_qr_popup",open:"web_app_open_scan_qr_popup"}),this.postEvent=n}close(){this.postEvent("web_app_close_scan_qr_popup"),this.isOpened=!1}set isOpened(t){this.set("isOpened",t)}get isOpened(){return this.get("isOpened")}async open(t){if(this.isOpened)throw new Error("QR scanner is already opened.");this.isOpened=!0;try{return(await b({method:"web_app_open_scan_qr_popup",event:["qr_text_received","scan_qr_popup_closed"],postEvent:this.postEvent,params:{text:t}})||{}).data||null}finally{this.isOpened=!1}}}const ls=_(({version:e,postEvent:t})=>new us(!1,e,t));class ds extends at{constructor(t,s,n){super({isVisible:t},s,{show:"web_app_setup_settings_button",hide:"web_app_setup_settings_button"}),h(this,"on",(r,i)=>r==="click"?P("settings_button_pressed",i):this.state.on(r,i)),h(this,"off",(r,i)=>r==="click"?z("settings_button_pressed",i):this.state.off(r,i)),this.postEvent=n}set isVisible(t){this.set("isVisible",t),this.postEvent("web_app_setup_settings_button",{is_visible:t})}get isVisible(){return this.get("isVisible")}hide(){this.isVisible=!1}show(){this.isVisible=!0}}const _s=_("settingsButton",({version:e,postEvent:t,state:s={isVisible:!1}})=>new ds(s.isVisible,e,t));function Gt(e){return Nt().parse(e)}class gs extends ht{get accentTextColor(){return this.get("accentTextColor")}get bgColor(){return this.get("bgColor")}get buttonColor(){return this.get("buttonColor")}get buttonTextColor(){return this.get("buttonTextColor")}get destructiveTextColor(){return this.get("destructiveTextColor")}getState(){return this.clone()}get headerBgColor(){return this.get("headerBgColor")}get hintColor(){return this.get("hintColor")}get isDark(){return!this.bgColor||It(this.bgColor)}get linkColor(){return this.get("linkColor")}get secondaryBgColor(){return this.get("secondaryBgColor")}get sectionBgColor(){return this.get("sectionBgColor")}get sectionHeaderTextColor(){return this.get("sectionHeaderTextColor")}listen(){return P("theme_changed",t=>{this.set(Gt(t.theme_params))})}get subtitleTextColor(){return this.get("subtitleTextColor")}get textColor(){return this.get("textColor")}}const ws=_("themeParams",({themeParams:e,state:t=e})=>{const s=new gs(t);return T()||s.listen(),s});function un(e={}){return b({...e,method:"web_app_request_theme",event:"theme_changed"}).then(Gt)}class fs extends ct{constructor(t,s,n){super(t,{readTextFromClipboard:"web_app_read_text_from_clipboard"}),h(this,"supportsParam"),this.version=t,this.createRequestId=s,this.postEvent=n,this.supportsParam=jt(t,{"openLink.tryInstantView":["web_app_open_link","try_instant_view"]})}openLink(t,s){const n=new URL(t,window.location.href).toString();if(!C("web_app_open_link",this.version)){window.open(n,"_blank");return}this.postEvent("web_app_open_link",{url:n,...typeof s=="boolean"?{try_instant_view:s}:{}})}openTelegramLink(t){const{hostname:s,pathname:n,search:r}=new URL(t,window.location.href);if(s!=="t.me")throw new Error(`URL has not allowed hostname: ${s}. Only "t.me" is allowed`);if(!C("web_app_open_tg_link",this.version)){window.location.href=t;return}this.postEvent("web_app_open_tg_link",{path_full:n+r})}async readTextFromClipboard(){const t=this.createRequestId(),{data:s=null}=await b({method:"web_app_read_text_from_clipboard",event:"clipboard_text_received",postEvent:this.postEvent,params:{req_id:t},capture:Ct(t)});return s}}const ms=_(({version:e,postEvent:t,createRequestId:s})=>new fs(e,s,t));async function zt(e={}){const{is_expanded:t,is_state_stable:s,...n}=await b({...e,method:"web_app_request_viewport",event:"viewport_changed"});return{...n,isExpanded:t,isStateStable:s}}function k(e){return e<0?0:e}class Kt extends ht{constructor({postEvent:t,stableHeight:s,height:n,width:r,isExpanded:i}){super({height:k(n),isExpanded:i,stableHeight:k(s),width:k(r)}),h(this,"postEvent"),this.postEvent=t}async sync(t){const{isStateStable:s,...n}=await zt(t);this.set({...n,stableHeight:s?n.height:this.get("stableHeight")})}get height(){return this.get("height")}get stableHeight(){return this.get("stableHeight")}listen(){return P("viewport_changed",t=>{const{height:s,width:n,is_expanded:r,is_state_stable:i}=t,a=k(s);this.set({height:a,isExpanded:r,width:k(n),...i?{stableHeight:a}:{}})})}get isExpanded(){return this.get("isExpanded")}get width(){return this.get("width")}expand(){this.postEvent("web_app_expand"),this.set("isExpanded",!0)}get isStable(){return this.stableHeight===this.height}}async function bs(e,t={}){const{height:s,width:n,isExpanded:r,isStateStable:i}=await zt({...t,postEvent:e});return new Kt({postEvent:e,height:s,width:n,isExpanded:r,stableHeight:i?s:0})}function vs({state:e,platform:t,postEvent:s}){let n=!1,r=0,i=0,a=0;return e?(n=e.isExpanded,r=e.height,i=e.width,a=e.stableHeight):["macos","tdesktop","unigram","webk","weba","web"].includes(t)&&(n=!0,r=window.innerHeight,i=window.innerWidth,a=window.innerHeight),new Kt({postEvent:s,height:r,width:i,stableHeight:a,isExpanded:n})}const ys=_("viewport",async e=>{if(T()&&!e.state)throw d(st,"Viewport cannot be instantiated on the server side without passing the ssr.state object.");let t=vs(e);return T()||(t.width===0&&await bs(e.postEvent,{timeout:1e3}).then(s=>t=s).catch(s=>U.error("Unable to sync viewport state",s)),t.listen()),t});function x(e,t){document.documentElement.style.setProperty(e,t)}function ln(e,t,s){s||(s=o=>`--tg-${o}-color`);const n=s("header"),r=s("bg"),i=()=>{const{headerColor:o}=e;if(rt(o))x(n,o);else{const{bgColor:p,secondaryBgColor:u}=t;o==="bg_color"&&p?x(n,p):o==="secondary_bg_color"&&u&&x(n,u)}x(r,e.bgColor)},a=[t.on("change",i),e.on("change",i)];return i(),()=>a.forEach(o=>o())}function dn(e,t){t||(t=n=>`--tg-theme-${n.replace(/[A-Z]/g,r=>`-${r.toLowerCase()}`)}`);const s=()=>{Object.entries(e.getState()).forEach(([n,r])=>{r&&x(t(n),r)})};return s(),e.on("change",s)}function _n(e,t){t||(t=u=>`--tg-viewport-${u}`);const[s,n,r]=["height","width","stable-height"].map(u=>t(u)),i=()=>x(s,`${e.height}px`),a=()=>x(n,`${e.width}px`),o=()=>x(r,`${e.stableHeight}px`),p=[e.on("change:height",i),e.on("change:width",a),e.on("change:stableHeight",o)];return i(),a(),o(),()=>p.forEach(u=>u())}function Es(e=!0){const t=[P("reload_iframe",()=>{N("iframe_will_reload"),window.location.reload()})],s=()=>t.forEach(n=>n());if(e){const n=document.createElement("style");n.id="telegram-custom-styles",document.head.appendChild(n),t.push(P("set_custom_style",r=>{n.innerHTML=r}),()=>document.head.removeChild(n))}return N("iframe_ready",{reload_supported:!0}),s}async function gn(){if(Rt(window))return!0;try{return await b({method:"web_app_request_theme",event:"theme_changed",timeout:100}),!0}catch{return!1}}function Ps(e){return e instanceof W}function wn(e,t){return Ps(e)&&e.type===t}function J(e,t){let s,n,r;return typeof e=="string"?s=e:(s=e.pathname===void 0?t:e.pathname,n=e.params,r=e.id),Object.freeze({id:r||(Math.random()*2**14|0).toString(16),pathname:s,params:n})}class Rs{constructor(t,s,n=N){if(h(this,"history"),h(this,"ee",new H),h(this,"attached",!1),h(this,"back",()=>this.go(-1)),h(this,"on",this.ee.on.bind(this.ee)),h(this,"off",this.ee.off.bind(this.ee)),this._index=s,this.postEvent=n,t.length===0)throw d(ce,"History should not be empty.");if(s<0||s>=t.length)throw d(pe,"Index should not be zero and higher or equal than history size.");this.history=t.map(r=>J(r,""))}attach(){this.attached||(this.attached=!0,this.sync(),P("back_button_pressed",this.back))}get current(){return this.history[this.index]}detach(){this.attached=!1,z("back_button_pressed",this.back)}forward(){this.go(1)}go(t,s){const n=this.index+t,r=Math.min(Math.max(0,n),this.history.length-1);(n===r||s)&&this.replaceAndMove(r,this.history[r])}goTo(t,s){this.go(t-this.index,s)}get hasPrev(){return this.index>0}get hasNext(){return this.index!==this.history.length-1}get index(){return this._index}push(t){this.hasNext&&this.history.splice(this.index+1),this.replaceAndMove(this.index+1,J(t,this.current.pathname))}replace(t){this.replaceAndMove(this.index,J(t,this.current.pathname))}replaceAndMove(t,s){const n=t-this.index;if(!n&&this.current===s)return;const r=this.current;if(this.index!==t){const i=this._index;this._index=t,this.attached&&i>0!=t>0&&this.sync()}this.history[t]=s,this.ee.emit("change",{navigator:this,from:r,to:this.current,delta:n})}sync(){this.postEvent("web_app_setup_back_button",{is_visible:!!this.index})}}function Q({params:e,...t}){return{...e||{hash:"",search:""},...t}}function D(e,t){return e.startsWith(t)?e:`${t}${e}`}function $(e){return new URL(typeof e=="string"?e:`${e.pathname||""}${D(e.search||"","?")}${D(e.hash||"","#")}`,"http://a")}function L(e){const t=typeof e=="string"?e.startsWith("/"):!!(e.pathname&&e.pathname.startsWith("/")),s=$(e);return`${t?s.pathname:s.pathname.slice(1)}${s.search}${s.hash}`}function F(e,t,s){let n,r;typeof e=="string"?n=e:(n=L(e),s=e.state,r=e.id);const{pathname:i,search:a,hash:o}=new URL(n,`http://a${D(t,"/")}`);return{id:r,pathname:i,params:{hash:o,search:a,state:s}}}async function O(e){return e===0?!0:Promise.race([new Promise(t=>{const s=tt("popstate",()=>{s(),t(!0)});window.history.go(e)}),new Promise(t=>{setTimeout(t,50,!1)})])}async function xs(){if(window.history.length<=1||(window.history.pushState(null,""),await O(1-window.history.length)))return;let e=await O(-1);for(;e;)e=await O(-1)}function Jt(e){return $(e).pathname}const wt=0,Y=1,Z=2;class Qt{constructor(t,s,{postEvent:n,hashMode:r,base:i}={}){h(this,"navigator"),h(this,"ee",new H),h(this,"hashMode"),h(this,"base"),h(this,"attached",!1),h(this,"onPopState",({state:a})=>{if(a===null)return this.push(this.parsePath(window.location.href));a===wt?window.history.forward():a===Y&&this.back(),a===Z&&this.forward()}),h(this,"onNavigatorChange",async({to:a,from:o,delta:p})=>{this.attached&&await this.syncHistory(),this.ee.emit("change",{delta:p,from:Q(o),to:Q(a),navigator:this})}),h(this,"on",this.ee.on.bind(this.ee)),h(this,"off",this.ee.off.bind(this.ee)),this.navigator=new Rs(t.map(a=>F(a,"/")),s,n),this.navigator.on("change",this.onNavigatorChange),this.hashMode=r,this.base=Jt(i||"")}async attach(){this.attached||(this.attached=!0,this.navigator.attach(),window.addEventListener("popstate",this.onPopState),await this.syncHistory())}back(){this.navigator.back()}detach(){this.attached=!1,this.navigator.detach(),window.removeEventListener("popstate",this.onPopState)}forward(){return this.navigator.forward()}get index(){return this.navigator.index}get id(){return this.navigator.current.id}go(t,s){return this.navigator.go(t,s)}goTo(t,s){this.navigator.goTo(t,s)}get hash(){return(this.navigator.current.params||{}).hash||""}get hasPrev(){return this.navigator.hasPrev}get hasNext(){return this.navigator.hasNext}get history(){return this.navigator.history.map(Q)}get path(){return L(this)}get pathname(){return this.navigator.current.pathname}parsePath(t){let s=$(t);return this.hashMode&&(s=$(s.hash.slice(1))),{pathname:s.pathname,search:s.search,hash:s.hash}}push(t,s){const n=F(t,this.path),{state:r=s}=n.params;this.navigator.push({...n,params:{...n.params,state:r}})}replace(t,s){const n=F(t,this.path),{state:r=s}=n.params;this.navigator.replace({...n,params:{...n.params,state:r}})}renderPath(t){const s=(this.base.length===1?"":this.base)+D(L(t),"/");return this.hashMode?D(s.slice(1),this.hashMode==="default"?"#":"#/"):s}async syncHistory(){window.removeEventListener("popstate",this.onPopState);const{state:t}=this,s=this.renderPath(this);await xs(),this.hasPrev&&this.hasNext?(window.history.replaceState(Y,""),window.history.pushState(t,"",s),window.history.pushState(Z,""),await O(-1)):this.hasPrev?(window.history.replaceState(Y,""),window.history.pushState(t,"",s)):this.hasNext?(window.history.replaceState(t,s),window.history.pushState(Z,""),await O(-1)):(window.history.replaceState(wt,""),window.history.pushState(t,"",s)),window.addEventListener("popstate",this.onPopState)}get search(){return(this.navigator.current.params||{}).search||""}get state(){return(this.navigator.current.params||{}).state}}function Ss(e){e||(e={});const{href:t,hash:s}=window.location;let n=L(e.hashMode?s.includes("?")?s.slice(1):`?${s.slice(1)}`:t);const r=e.base?Jt(e.base):void 0;if(r){if(!n.startsWith(r))throw d(le,`Path "${n}" expected to be starting with "${r}"`);n=n.slice(r.length)}return new Qt([n],0,e)}function fn(e){const t=e.match(/#(.+)/);return t?t[1]:null}function Cs(e,t){if(Ht()){const s=sessionStorage.getItem(e);if(s)try{const{index:n,history:r}=JSON.parse(s);return new Qt(r,n,t)}catch(n){console.error("Unable to restore hash navigator state.",n)}}return Ss(t)}function mn(e,t){const s=Cs(e,t),n=()=>sessionStorage.setItem(e,JSON.stringify({index:s.index,history:s.history}));return s.on("change",n),n(),s}function g(e,t){function s(n){return(r,i,a)=>o=>{const p=o[i]||[],u={...o,[r]:n(...p)};return ft.jsx(a,{...u})}}return[s(e),s(t)]}const Ft=f.createContext(void 0);function Ts(){const e=f.useContext(Ft);if(!e)throw new Error("useSDK was used outside the SDKProvider.");return e}function w(e){const t=(...s)=>{const n=Ts();return f.useMemo(()=>n.use(e,...s),[n])};return[t,(...s)=>{const n=t(...s);if("error"in n)throw n.error;return n.result}]}const[As,Is]=w(Le),[bn,vn]=g(As,Is),[ks,qs]=w(He),[yn,En]=g(ks,qs),[Os,Ns]=w(je),[Pn,Rn]=g(Os,Ns),[Ds,Vs]=w(Qe),[xn,Sn]=g(Ds,Vs),[Bs,Ms]=w(Ye),[Cn,Tn]=g(Bs,Ms),[$s,Ls]=w(Xe),[An,In]=g($s,Ls),[Us,Hs]=w(es),[kn,qn]=g(Us,Hs),[Ws,js]=w(ns),[On,Nn]=g(Ws,js),[Gs,zs]=w(os),[Dn,Vn]=g(Gs,zs),[Ks,Js]=w(ps),[Bn,Mn]=g(Ks,Js),[Qs,Fs]=w(ls),[$n,Ln]=g(Qs,Fs),[Ys,Zs]=w(_s),[Un,Hn]=g(Ys,Zs),[Xs,tn]=w(ws),[Wn,jn]=g(Xs,tn);function Gn(){return f.useMemo(Ut,[])}const[en,sn]=w(ms),[zn,Kn]=g(en,sn),[nn,rn]=w(ys),[Jn,Qn]=g(nn,rn);function Fn({children:e,acceptCustomStyles:t,debug:s}){const n=f.useRef(!0),[r,i]=f.useState(()=>new Map),a=f.useCallback(l=>{n.current&&i(M=>(l&&l(M),new Map(M)))},[]),o=f.useCallback(()=>a(),[a]),p=f.useRef([]),u=f.useMemo(()=>({use(l,...M){const pt=r.get(l);if(pt)return pt;let v;try{v={result:l(...M)}}catch(y){v={error:y}}if("error"in v||!v.result)return r.set(l,v),v;const ut=y=>("on"in y&&(y.on("change",o),p.current.push(y)),{result:y});return v.result instanceof Promise?(v.result.then(y=>a(K=>K.set(l,ut(y))),y=>a(K=>K.set(l,{error:y}))),r.set(l,{}),{}):(r.set(l,v=ut(v.result)),v)}}),[r]);return f.useEffect(()=>{ee(s||!1)},[s]),f.useEffect(()=>()=>{n.current=!1},[]),f.useEffect(()=>{if(xt())return Es(t)},[t]),f.useEffect(()=>()=>p.current.forEach(l=>l.off("change",o)),[o]),ft.jsx(Ft.Provider,{value:u,children:e})}export{Te as BackButton,Rs as BasicNavigator,_t as BiometryManager,Qt as BrowserNavigator,We as ClosingBehavior,Je as CloudStorage,le as ERR_INVALID_PATH_BASE,ae as ERR_INVOKE_CUSTOM_METHOD_RESPONSE,re as ERR_METHOD_PARAMETER_UNSUPPORTED,ne as ERR_METHOD_UNSUPPORTED,ce as ERR_NAVIGATION_HISTORY_EMPTY,pe as ERR_NAVIGATION_INDEX_INVALID,on as ERR_NAVIGATION_ITEM_INVALID,vt as ERR_PARSE,st as ERR_SSR_INIT,ue as ERR_SSR_POST_EVENT,oe as ERR_TIMED_OUT,he as ERR_UNEXPECTED_TYPE,ie as ERR_UNKNOWN_ENV,H as EventEmitter,Fe as HapticFeedback,Ze as InitData,ts as Invoice,ss as MainButton,as as MiniApp,cs as Popup,us as QRScanner,W as SDKError,Fn as SDKProvider,ds as SettingsButton,gs as ThemeParams,fs as Utils,Kt as Viewport,Ke as array,ln as bindMiniAppCSSVars,dn as bindThemeParamsCSSVars,_n as bindViewportCSSVars,R as boolean,Ct as captureSameReq,et as classNames,Pe as compareVersions,Ss as createBrowserNavigatorFromLocation,Se as createPostEvent,$ as createSafeURL,qt as date,fn as getHash,Jt as getPathname,Le as initBackButton,He as initBiometryManager,je as initClosingBehavior,Qe as initCloudStorage,Ye as initHapticFeedback,Xe as initInitData,es as initInvoice,ns as initMainButton,os as initMiniApp,mn as initNavigator,ps as initPopup,ls as initQRScanner,_s as initSettingsButton,ws as initThemeParams,ms as initUtils,ys as initViewport,Es as initWeb,q as invokeCustomMethod,It as isColorDark,xt as isIframe,Ht as isPageReload,rt as isRGB,de as isRGBShort,Ps as isSDKError,wn as isSDKErrorOfType,T as isSSR,gn as isTMA,m as json,cn as mergeClassNames,S as number,z as off,P as on,pn as parseInitData,Dt as parseLaunchParams,Gt as parseThemeParams,N as postEvent,b as request,Ue as requestBiometryInfo,un as requestThemeParams,zt as requestViewport,Ut as retrieveLaunchParams,Pt as rgb,ot as searchParams,Ve as serializeLaunchParams,De as serializeThemeParams,x as setCSSVar,ee as setDebug,hn as setTargetOrigin,c as string,Xt as subscribe,C as supports,xe as targetOrigin,Et as toRGB,bt as unsubscribe,L as urlToPath,Is as useBackButton,As as useBackButtonRaw,qs as useBiometryManager,ks as useBiometryManagerRaw,Ns as useClosingBehavior,Os as useClosingBehaviorRaw,Vs as useCloudStorage,Ds as useCloudStorageRaw,Ms as useHapticFeedback,Bs as useHapticFeedbackRaw,Ls as useInitData,$s as useInitDataRaw,Hs as useInvoice,Us as useInvoiceRaw,Gn as useLaunchParams,js as useMainButton,Ws as useMainButtonRaw,zs as useMiniApp,Gs as useMiniAppRaw,Js as usePopup,Ks as usePopupRaw,Fs as useQRScanner,Qs as useQRScannerRaw,Ts as useSDK,Zs as useSettingsButton,Ys as useSettingsButtonRaw,tn as useThemeParams,Xs as useThemeParamsRaw,sn as useUtils,en as useUtilsRaw,rn as useViewport,nn as useViewportRaw,vn as withBackButton,bn as withBackButtonRaw,En as withBiometryManager,yn as withBiometryManagerRaw,Rn as withClosingBehavior,Pn as withClosingBehaviorRaw,Sn as withCloudStorage,xn as withCloudStorageRaw,Tn as withHapticFeedback,Cn as withHapticFeedbackRaw,In as withInitData,An as withInitDataRaw,qn as withInvoice,kn as withInvoiceRaw,Nn as withMainButton,On as withMainButtonRaw,Vn as withMiniApp,Dn as withMiniAppRaw,Mn as withPopup,Bn as withPopupRaw,Ln as withQRScanner,$n as withQRScannerRaw,Hn as withSettingsButton,Un as withSettingsButtonRaw,jn as withThemeParams,Wn as withThemeParamsRaw,At as withTimeout,Kn as withUtils,zn as withUtilsRaw,Qn as withViewport,Jn as withViewportRaw};
